//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/nbransby/Documents/joda-time/src/main/java/org/joda/time/Partial.java
//

#include "AbstractPartial.h"
#include "AbstractPartialFieldProperty.h"
#include "Chronology.h"
#include "DateTimeField.h"
#include "DateTimeFieldType.h"
#include "DateTimeFormat.h"
#include "DateTimeFormatter.h"
#include "DateTimeUtils.h"
#include "DurationField.h"
#include "DurationFieldType.h"
#include "FieldUtils.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "ISODateTimeFormat.h"
#include "J2ObjC_source.h"
#include "Partial.h"
#include "ReadableInstant.h"
#include "ReadablePartial.h"
#include "ReadablePeriod.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/List.h"
#include "java/util/Locale.h"

@interface OrgJodaTimePartial () {
 @public
  /**
   @brief The chronology in use.
   */
  OrgJodaTimeChronology *iChronology_;
  /**
   @brief The set of field types.
   */
  IOSObjectArray *iTypes_;
  /**
   @brief The values of each field in this partial.
   */
  IOSIntArray *iValues_;
  /**
   @brief The formatter to use, [0] may miss some fields, [1] doesn't miss any fields.
   */
  IOSObjectArray *iFormatter_;
}
@end

J2OBJC_FIELD_SETTER(OrgJodaTimePartial, iChronology_, OrgJodaTimeChronology *)
J2OBJC_FIELD_SETTER(OrgJodaTimePartial, iTypes_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgJodaTimePartial, iValues_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgJodaTimePartial, iFormatter_, IOSObjectArray *)

@interface OrgJodaTimePartial_Property () {
 @public
  /**
   @brief The partial
   */
  OrgJodaTimePartial *iPartial_;
  /**
   @brief The field index
   */
  jint iFieldIndex_;
}
@end

J2OBJC_FIELD_SETTER(OrgJodaTimePartial_Property, iPartial_, OrgJodaTimePartial *)

@implementation OrgJodaTimePartial

- (instancetype)init {
  return [self initOrgJodaTimePartialWithOrgJodaTimeChronology:(OrgJodaTimeChronology *) check_class_cast(nil, [OrgJodaTimeChronology class])];
}

- (instancetype)initOrgJodaTimePartialWithOrgJodaTimeChronology:(OrgJodaTimeChronology *)chrono {
  if (self = [super init]) {
    OrgJodaTimePartial_set_iChronology_(self, [((OrgJodaTimeChronology *) nil_chk(OrgJodaTimeDateTimeUtils_getChronologyWithOrgJodaTimeChronology_(chrono))) withUTC]);
    OrgJodaTimePartial_setAndConsume_iTypes_(self, [IOSObjectArray newArrayWithLength:0 type:OrgJodaTimeDateTimeFieldType_class_()]);
    OrgJodaTimePartial_setAndConsume_iValues_(self, [IOSIntArray newArrayWithLength:0]);
  }
  return self;
}

- (instancetype)initWithOrgJodaTimeChronology:(OrgJodaTimeChronology *)chrono {
  return [self initOrgJodaTimePartialWithOrgJodaTimeChronology:chrono];
}

- (instancetype)initWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)type
                                             withInt:(jint)value {
  return [self initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldType:type withInt:value withOrgJodaTimeChronology:nil];
}

- (instancetype)initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)type
                                                               withInt:(jint)value
                                             withOrgJodaTimeChronology:(OrgJodaTimeChronology *)chronology {
  if (self = [super init]) {
    chronology = [((OrgJodaTimeChronology *) nil_chk(OrgJodaTimeDateTimeUtils_getChronologyWithOrgJodaTimeChronology_(chronology))) withUTC];
    OrgJodaTimePartial_set_iChronology_(self, chronology);
    if (type == nil) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"The field type must not be null"] autorelease];
    }
    OrgJodaTimePartial_setAndConsume_iTypes_(self, [IOSObjectArray newArrayWithObjects:(id[]){ type } count:1 type:OrgJodaTimeDateTimeFieldType_class_()]);
    OrgJodaTimePartial_setAndConsume_iValues_(self, [IOSIntArray newArrayWithInts:(jint[]){ value } count:1]);
    [((OrgJodaTimeChronology *) nil_chk(chronology)) validateWithOrgJodaTimeReadablePartial:self withIntArray:iValues_];
  }
  return self;
}

- (instancetype)initWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)type
                                             withInt:(jint)value
                           withOrgJodaTimeChronology:(OrgJodaTimeChronology *)chronology {
  return [self initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldType:type withInt:value withOrgJodaTimeChronology:chronology];
}

- (instancetype)initWithOrgJodaTimeDateTimeFieldTypeArray:(IOSObjectArray *)types
                                             withIntArray:(IOSIntArray *)values {
  return [self initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldTypeArray:types withIntArray:values withOrgJodaTimeChronology:nil];
}

- (instancetype)initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldTypeArray:(IOSObjectArray *)types
                                                               withIntArray:(IOSIntArray *)values
                                                  withOrgJodaTimeChronology:(OrgJodaTimeChronology *)chronology {
  if (self = [super init]) {
    chronology = [((OrgJodaTimeChronology *) nil_chk(OrgJodaTimeDateTimeUtils_getChronologyWithOrgJodaTimeChronology_(chronology))) withUTC];
    OrgJodaTimePartial_set_iChronology_(self, chronology);
    if (types == nil) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Types array must not be null"] autorelease];
    }
    if (values == nil) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Values array must not be null"] autorelease];
    }
    if (((IOSIntArray *) nil_chk(values))->size_ != ((IOSObjectArray *) nil_chk(types))->size_) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Values array must be the same length as the types array"] autorelease];
    }
    if (types->size_ == 0) {
      OrgJodaTimePartial_set_iTypes_(self, types);
      OrgJodaTimePartial_set_iValues_(self, values);
      return self;
    }
    for (jint i = 0; i < types->size_; i++) {
      if (IOSObjectArray_Get(types, i) == nil) {
        @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$I", @"Types array must not contain null: index ", i)] autorelease];
      }
    }
    OrgJodaTimeDurationField *lastUnitField = nil;
    for (jint i = 0; i < types->size_; i++) {
      OrgJodaTimeDateTimeFieldType *loopType = IOSObjectArray_Get(types, i);
      OrgJodaTimeDurationField *loopUnitField = [((OrgJodaTimeDurationFieldType *) nil_chk([((OrgJodaTimeDateTimeFieldType *) nil_chk(loopType)) getDurationType])) getFieldWithOrgJodaTimeChronology:iChronology_];
      if (i > 0) {
        if ([((OrgJodaTimeDurationField *) nil_chk(loopUnitField)) isSupported] == NO) {
          if ([((OrgJodaTimeDurationField *) nil_chk(lastUnitField)) isSupported]) {
            @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must be in order largest-smallest: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" < ", [loopType getName])] autorelease];
          }
          else {
            @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must not contain duplicate unsupported: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" and ", [loopType getName])] autorelease];
          }
        }
        jint compare = [((OrgJodaTimeDurationField *) nil_chk(lastUnitField)) compareToWithId:loopUnitField];
        if (compare < 0) {
          @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must be in order largest-smallest: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" < ", [loopType getName])] autorelease];
        }
        else if (compare == 0) {
          if ([lastUnitField isEqual:loopUnitField]) {
            OrgJodaTimeDurationFieldType *lastRangeType = [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getRangeDurationType];
            OrgJodaTimeDurationFieldType *loopRangeType = [loopType getRangeDurationType];
            if (lastRangeType == nil) {
              if (loopRangeType == nil) {
                @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must not contain duplicate: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" and ", [loopType getName])] autorelease];
              }
            }
            else {
              if (loopRangeType == nil) {
                @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must be in order largest-smallest: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" < ", [loopType getName])] autorelease];
              }
              OrgJodaTimeDurationField *lastRangeField = [lastRangeType getFieldWithOrgJodaTimeChronology:iChronology_];
              OrgJodaTimeDurationField *loopRangeField = [((OrgJodaTimeDurationFieldType *) nil_chk(loopRangeType)) getFieldWithOrgJodaTimeChronology:iChronology_];
              if ([((OrgJodaTimeDurationField *) nil_chk(lastRangeField)) compareToWithId:loopRangeField] < 0) {
                @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must be in order largest-smallest: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" < ", [loopType getName])] autorelease];
              }
              if ([lastRangeField compareToWithId:loopRangeField] == 0) {
                @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must not contain duplicate: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" and ", [loopType getName])] autorelease];
              }
            }
          }
          else {
            if ([lastUnitField isSupported] && [lastUnitField getType] != OrgJodaTimeDurationFieldType_get_YEARS_TYPE_()) {
              @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:JreStrcat("$$$$", @"Types array must be in order largest-smallest, for year-based fields, years is defined as being largest: ", [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(types, i - 1))) getName], @" < ", [loopType getName])] autorelease];
            }
          }
        }
      }
      lastUnitField = loopUnitField;
    }
    OrgJodaTimePartial_set_iTypes_(self, (IOSObjectArray *) check_class_cast([types clone], [IOSObjectArray class]));
    [((OrgJodaTimeChronology *) nil_chk(chronology)) validateWithOrgJodaTimeReadablePartial:self withIntArray:values];
    OrgJodaTimePartial_set_iValues_(self, (IOSIntArray *) check_class_cast([values clone], [IOSIntArray class]));
  }
  return self;
}

- (instancetype)initWithOrgJodaTimeDateTimeFieldTypeArray:(IOSObjectArray *)types
                                             withIntArray:(IOSIntArray *)values
                                withOrgJodaTimeChronology:(OrgJodaTimeChronology *)chronology {
  return [self initOrgJodaTimePartialWithOrgJodaTimeDateTimeFieldTypeArray:types withIntArray:values withOrgJodaTimeChronology:chronology];
}

- (instancetype)initWithOrgJodaTimeReadablePartial:(id<OrgJodaTimeReadablePartial>)partial {
  if (self = [super init]) {
    if (partial == nil) {
      @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"The partial must not be null"] autorelease];
    }
    OrgJodaTimePartial_set_iChronology_(self, [((OrgJodaTimeChronology *) nil_chk(OrgJodaTimeDateTimeUtils_getChronologyWithOrgJodaTimeChronology_([((id<OrgJodaTimeReadablePartial>) nil_chk(partial)) getChronology]))) withUTC]);
    OrgJodaTimePartial_setAndConsume_iTypes_(self, [IOSObjectArray newArrayWithLength:[partial size] type:OrgJodaTimeDateTimeFieldType_class_()]);
    OrgJodaTimePartial_setAndConsume_iValues_(self, [IOSIntArray newArrayWithLength:[partial size]]);
    for (jint i = 0; i < [partial size]; i++) {
      IOSObjectArray_Set(iTypes_, i, [partial getFieldTypeWithInt:i]);
      *IOSIntArray_GetRef(iValues_, i) = [partial getValueWithInt:i];
    }
  }
  return self;
}

- (instancetype)initWithOrgJodaTimePartial:(OrgJodaTimePartial *)partial
                              withIntArray:(IOSIntArray *)values {
  if (self = [super init]) {
    OrgJodaTimePartial_set_iChronology_(self, ((OrgJodaTimePartial *) nil_chk(partial))->iChronology_);
    OrgJodaTimePartial_set_iTypes_(self, partial->iTypes_);
    OrgJodaTimePartial_set_iValues_(self, values);
  }
  return self;
}

- (instancetype)initWithOrgJodaTimeChronology:(OrgJodaTimeChronology *)chronology
        withOrgJodaTimeDateTimeFieldTypeArray:(IOSObjectArray *)types
                                 withIntArray:(IOSIntArray *)values {
  if (self = [super init]) {
    OrgJodaTimePartial_set_iChronology_(self, chronology);
    OrgJodaTimePartial_set_iTypes_(self, types);
    OrgJodaTimePartial_set_iValues_(self, values);
  }
  return self;
}

- (jint)size {
  return ((IOSObjectArray *) nil_chk(iTypes_))->size_;
}

- (OrgJodaTimeChronology *)getChronology {
  return iChronology_;
}

- (OrgJodaTimeDateTimeField *)getFieldWithInt:(jint)index
                    withOrgJodaTimeChronology:(OrgJodaTimeChronology *)chrono {
  return [((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(nil_chk(iTypes_), index))) getFieldWithOrgJodaTimeChronology:chrono];
}

- (OrgJodaTimeDateTimeFieldType *)getFieldTypeWithInt:(jint)index {
  return IOSObjectArray_Get(nil_chk(iTypes_), index);
}

- (IOSObjectArray *)getFieldTypes {
  return (IOSObjectArray *) check_class_cast([((IOSObjectArray *) nil_chk(iTypes_)) clone], [IOSObjectArray class]);
}

- (jint)getValueWithInt:(jint)index {
  return IOSIntArray_Get(nil_chk(iValues_), index);
}

- (IOSIntArray *)getValues {
  return (IOSIntArray *) check_class_cast([((IOSIntArray *) nil_chk(iValues_)) clone], [IOSIntArray class]);
}

- (OrgJodaTimePartial *)withChronologyRetainFieldsWithOrgJodaTimeChronology:(OrgJodaTimeChronology *)newChronology {
  newChronology = OrgJodaTimeDateTimeUtils_getChronologyWithOrgJodaTimeChronology_(newChronology);
  newChronology = [((OrgJodaTimeChronology *) nil_chk(newChronology)) withUTC];
  if (newChronology == [self getChronology]) {
    return self;
  }
  else {
    OrgJodaTimePartial *newPartial = [[[OrgJodaTimePartial alloc] initWithOrgJodaTimeChronology:newChronology withOrgJodaTimeDateTimeFieldTypeArray:iTypes_ withIntArray:iValues_] autorelease];
    [((OrgJodaTimeChronology *) nil_chk(newChronology)) validateWithOrgJodaTimeReadablePartial:newPartial withIntArray:iValues_];
    return newPartial;
  }
}

- (OrgJodaTimePartial *)withWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)fieldType
                                                     withInt:(jint)value {
  if (fieldType == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"The field type must not be null"] autorelease];
  }
  jint index = [self indexOfWithOrgJodaTimeDateTimeFieldType:fieldType];
  if (index == -1) {
    IOSObjectArray *newTypes = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk(iTypes_))->size_ + 1 type:OrgJodaTimeDateTimeFieldType_class_()];
    IOSIntArray *newValues = [IOSIntArray arrayWithLength:newTypes->size_];
    jint i = 0;
    OrgJodaTimeDurationField *unitField = [((OrgJodaTimeDurationFieldType *) nil_chk([((OrgJodaTimeDateTimeFieldType *) nil_chk(fieldType)) getDurationType])) getFieldWithOrgJodaTimeChronology:iChronology_];
    if ([((OrgJodaTimeDurationField *) nil_chk(unitField)) isSupported]) {
      for (; i < iTypes_->size_; i++) {
        OrgJodaTimeDateTimeFieldType *loopType = IOSObjectArray_Get(iTypes_, i);
        OrgJodaTimeDurationField *loopUnitField = [((OrgJodaTimeDurationFieldType *) nil_chk([((OrgJodaTimeDateTimeFieldType *) nil_chk(loopType)) getDurationType])) getFieldWithOrgJodaTimeChronology:iChronology_];
        if ([((OrgJodaTimeDurationField *) nil_chk(loopUnitField)) isSupported]) {
          jint compare = [unitField compareToWithId:loopUnitField];
          if (compare > 0) {
            break;
          }
          else if (compare == 0) {
            if ([fieldType getRangeDurationType] == nil) {
              break;
            }
            if ([loopType getRangeDurationType] == nil) {
              continue;
            }
            OrgJodaTimeDurationField *rangeField = [((OrgJodaTimeDurationFieldType *) nil_chk([fieldType getRangeDurationType])) getFieldWithOrgJodaTimeChronology:iChronology_];
            OrgJodaTimeDurationField *loopRangeField = [((OrgJodaTimeDurationFieldType *) nil_chk([loopType getRangeDurationType])) getFieldWithOrgJodaTimeChronology:iChronology_];
            if ([((OrgJodaTimeDurationField *) nil_chk(rangeField)) compareToWithId:loopRangeField] > 0) {
              break;
            }
          }
        }
      }
    }
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iTypes_, 0, newTypes, 0, i);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iValues_, 0, newValues, 0, i);
    IOSObjectArray_Set(newTypes, i, fieldType);
    *IOSIntArray_GetRef(newValues, i) = value;
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iTypes_, i, newTypes, i + 1, newTypes->size_ - i - 1);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iValues_, i, newValues, i + 1, newValues->size_ - i - 1);
    OrgJodaTimePartial *newPartial = [[[OrgJodaTimePartial alloc] initWithOrgJodaTimeDateTimeFieldTypeArray:newTypes withIntArray:newValues withOrgJodaTimeChronology:iChronology_] autorelease];
    [((OrgJodaTimeChronology *) nil_chk(iChronology_)) validateWithOrgJodaTimeReadablePartial:newPartial withIntArray:newValues];
    return newPartial;
  }
  if (value == [self getValueWithInt:index]) {
    return self;
  }
  IOSIntArray *newValues = [self getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getFieldWithInt:index])) setWithOrgJodaTimeReadablePartial:self withInt:index withIntArray:newValues withInt:value];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:self withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)withoutWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)fieldType {
  jint index = [self indexOfWithOrgJodaTimeDateTimeFieldType:fieldType];
  if (index != -1) {
    IOSObjectArray *newTypes = [IOSObjectArray arrayWithLength:[self size] - 1 type:OrgJodaTimeDateTimeFieldType_class_()];
    IOSIntArray *newValues = [IOSIntArray arrayWithLength:[self size] - 1];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iTypes_, 0, newTypes, 0, index);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iTypes_, index + 1, newTypes, index, newTypes->size_ - index);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iValues_, 0, newValues, 0, index);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(iValues_, index + 1, newValues, index, newValues->size_ - index);
    OrgJodaTimePartial *newPartial = [[[OrgJodaTimePartial alloc] initWithOrgJodaTimeChronology:iChronology_ withOrgJodaTimeDateTimeFieldTypeArray:newTypes withIntArray:newValues] autorelease];
    [((OrgJodaTimeChronology *) nil_chk(iChronology_)) validateWithOrgJodaTimeReadablePartial:newPartial withIntArray:newValues];
    return newPartial;
  }
  return self;
}

- (OrgJodaTimePartial *)withFieldWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)fieldType
                                                          withInt:(jint)value {
  jint index = [self indexOfSupportedWithOrgJodaTimeDateTimeFieldType:fieldType];
  if (value == [self getValueWithInt:index]) {
    return self;
  }
  IOSIntArray *newValues = [self getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getFieldWithInt:index])) setWithOrgJodaTimeReadablePartial:self withInt:index withIntArray:newValues withInt:value];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:self withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)withFieldAddedWithOrgJodaTimeDurationFieldType:(OrgJodaTimeDurationFieldType *)fieldType
                                                               withInt:(jint)amount {
  jint index = [self indexOfSupportedWithOrgJodaTimeDurationFieldType:fieldType];
  if (amount == 0) {
    return self;
  }
  IOSIntArray *newValues = [self getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getFieldWithInt:index])) addWithOrgJodaTimeReadablePartial:self withInt:index withIntArray:newValues withInt:amount];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:self withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)withFieldAddWrappedWithOrgJodaTimeDurationFieldType:(OrgJodaTimeDurationFieldType *)fieldType
                                                                    withInt:(jint)amount {
  jint index = [self indexOfSupportedWithOrgJodaTimeDurationFieldType:fieldType];
  if (amount == 0) {
    return self;
  }
  IOSIntArray *newValues = [self getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getFieldWithInt:index])) addWrapPartialWithOrgJodaTimeReadablePartial:self withInt:index withIntArray:newValues withInt:amount];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:self withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)withPeriodAddedWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                                             withInt:(jint)scalar {
  if (period == nil || scalar == 0) {
    return self;
  }
  IOSIntArray *newValues = [self getValues];
  for (jint i = 0; i < [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) size]; i++) {
    OrgJodaTimeDurationFieldType *fieldType = [period getFieldTypeWithInt:i];
    jint index = [self indexOfWithOrgJodaTimeDurationFieldType:fieldType];
    if (index >= 0) {
      newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getFieldWithInt:index])) addWithOrgJodaTimeReadablePartial:self withInt:index withIntArray:newValues withInt:OrgJodaTimeFieldFieldUtils_safeMultiplyWithInt_withInt_([period getValueWithInt:i], scalar)];
    }
  }
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:self withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)plusWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period {
  return [self withPeriodAddedWithOrgJodaTimeReadablePeriod:period withInt:1];
}

- (OrgJodaTimePartial *)minusWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period {
  return [self withPeriodAddedWithOrgJodaTimeReadablePeriod:period withInt:-1];
}

- (OrgJodaTimePartial_Property *)propertyWithOrgJodaTimeDateTimeFieldType:(OrgJodaTimeDateTimeFieldType *)type {
  return [[[OrgJodaTimePartial_Property alloc] initWithOrgJodaTimePartial:self withInt:[self indexOfSupportedWithOrgJodaTimeDateTimeFieldType:type]] autorelease];
}

- (jboolean)isMatchWithOrgJodaTimeReadableInstant:(id<OrgJodaTimeReadableInstant>)instant {
  jlong millis = OrgJodaTimeDateTimeUtils_getInstantMillisWithOrgJodaTimeReadableInstant_(instant);
  OrgJodaTimeChronology *chrono = OrgJodaTimeDateTimeUtils_getInstantChronologyWithOrgJodaTimeReadableInstant_(instant);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(iTypes_))->size_; i++) {
    jint value = [((OrgJodaTimeDateTimeField *) nil_chk([((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(iTypes_, i))) getFieldWithOrgJodaTimeChronology:chrono])) getWithLong:millis];
    if (value != IOSIntArray_Get(nil_chk(iValues_), i)) {
      return NO;
    }
  }
  return YES;
}

- (jboolean)isMatchWithOrgJodaTimeReadablePartial:(id<OrgJodaTimeReadablePartial>)partial {
  if (partial == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"The partial must not be null"] autorelease];
  }
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(iTypes_))->size_; i++) {
    jint value = [((id<OrgJodaTimeReadablePartial>) nil_chk(partial)) getWithOrgJodaTimeDateTimeFieldType:IOSObjectArray_Get(iTypes_, i)];
    if (value != IOSIntArray_Get(nil_chk(iValues_), i)) {
      return NO;
    }
  }
  return YES;
}

- (OrgJodaTimeFormatDateTimeFormatter *)getFormatter {
  IOSObjectArray *f = iFormatter_;
  if (f == nil) {
    if ([self size] == 0) {
      return nil;
    }
    f = [IOSObjectArray arrayWithLength:2 type:OrgJodaTimeFormatDateTimeFormatter_class_()];
    @try {
      id<JavaUtilList> list = [[[JavaUtilArrayList alloc] initWithJavaUtilCollection:JavaUtilArrays_asListWithNSObjectArray_(iTypes_)] autorelease];
      IOSObjectArray_Set(f, 0, OrgJodaTimeFormatISODateTimeFormat_forFieldsWithJavaUtilCollection_withBoolean_withBoolean_(list, YES, NO));
      if ([list size] == 0) {
        IOSObjectArray_Set(f, 1, IOSObjectArray_Get(f, 0));
      }
    }
    @catch (JavaLangIllegalArgumentException *ex) {
    }
    OrgJodaTimePartial_set_iFormatter_(self, f);
  }
  return IOSObjectArray_Get(nil_chk(f), 0);
}

- (NSString *)description {
  IOSObjectArray *f = iFormatter_;
  if (f == nil) {
    [self getFormatter];
    f = iFormatter_;
    if (f == nil) {
      return [self toStringList];
    }
  }
  OrgJodaTimeFormatDateTimeFormatter *f1 = IOSObjectArray_Get(nil_chk(f), 1);
  if (f1 == nil) {
    return [self toStringList];
  }
  return [((OrgJodaTimeFormatDateTimeFormatter *) nil_chk(f1)) printWithOrgJodaTimeReadablePartial:self];
}

- (NSString *)toStringList {
  jint size = [self size];
  JavaLangStringBuilder *buf = [[[JavaLangStringBuilder alloc] initWithInt:20 * size] autorelease];
  [buf appendWithChar:'['];
  for (jint i = 0; i < size; i++) {
    if (i > 0) {
      [((JavaLangStringBuilder *) nil_chk([buf appendWithChar:','])) appendWithChar:' '];
    }
    [buf appendWithNSString:[((OrgJodaTimeDateTimeFieldType *) nil_chk(IOSObjectArray_Get(nil_chk(iTypes_), i))) getName]];
    [buf appendWithChar:'='];
    [buf appendWithInt:IOSIntArray_Get(nil_chk(iValues_), i)];
  }
  [buf appendWithChar:']'];
  return [buf description];
}

- (NSString *)toStringWithNSString:(NSString *)pattern {
  if (pattern == nil) {
    return [self description];
  }
  return [((OrgJodaTimeFormatDateTimeFormatter *) nil_chk(OrgJodaTimeFormatDateTimeFormat_forPatternWithNSString_(pattern))) printWithOrgJodaTimeReadablePartial:self];
}

- (NSString *)toStringWithNSString:(NSString *)pattern
                withJavaUtilLocale:(JavaUtilLocale *)locale {
  if (pattern == nil) {
    return [self description];
  }
  return [((OrgJodaTimeFormatDateTimeFormatter *) nil_chk([((OrgJodaTimeFormatDateTimeFormatter *) nil_chk(OrgJodaTimeFormatDateTimeFormat_forPatternWithNSString_(pattern))) withLocaleWithJavaUtilLocale:locale])) printWithOrgJodaTimeReadablePartial:self];
}

- (void)dealloc {
  RELEASE_(iChronology_);
  RELEASE_(iTypes_);
  RELEASE_(iValues_);
  RELEASE_(iFormatter_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimePartial *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimePartial_set_iChronology_(other, iChronology_);
  OrgJodaTimePartial_set_iTypes_(other, iTypes_);
  OrgJodaTimePartial_set_iValues_(other, iValues_);
  OrgJodaTimePartial_set_iFormatter_(other, iFormatter_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeChronology:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeDateTimeFieldType:withInt:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeDateTimeFieldType:withInt:withOrgJodaTimeChronology:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeDateTimeFieldTypeArray:withIntArray:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeDateTimeFieldTypeArray:withIntArray:withOrgJodaTimeChronology:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimeReadablePartial:", "Partial", NULL, 0x1, NULL },
    { "initWithOrgJodaTimePartial:withIntArray:", "Partial", NULL, 0x0, NULL },
    { "initWithOrgJodaTimeChronology:withOrgJodaTimeDateTimeFieldTypeArray:withIntArray:", "Partial", NULL, 0x0, NULL },
    { "size", NULL, "I", 0x1, NULL },
    { "getChronology", NULL, "Lorg.joda.time.Chronology;", 0x1, NULL },
    { "getFieldWithInt:withOrgJodaTimeChronology:", "getField", "Lorg.joda.time.DateTimeField;", 0x4, NULL },
    { "getFieldTypeWithInt:", "getFieldType", "Lorg.joda.time.DateTimeFieldType;", 0x1, NULL },
    { "getFieldTypes", NULL, "[Lorg.joda.time.DateTimeFieldType;", 0x1, NULL },
    { "getValueWithInt:", "getValue", "I", 0x1, NULL },
    { "getValues", NULL, "[I", 0x1, NULL },
    { "withChronologyRetainFieldsWithOrgJodaTimeChronology:", "withChronologyRetainFields", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withWithOrgJodaTimeDateTimeFieldType:withInt:", "with", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withoutWithOrgJodaTimeDateTimeFieldType:", "without", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withFieldWithOrgJodaTimeDateTimeFieldType:withInt:", "withField", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withFieldAddedWithOrgJodaTimeDurationFieldType:withInt:", "withFieldAdded", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withFieldAddWrappedWithOrgJodaTimeDurationFieldType:withInt:", "withFieldAddWrapped", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withPeriodAddedWithOrgJodaTimeReadablePeriod:withInt:", "withPeriodAdded", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "plusWithOrgJodaTimeReadablePeriod:", "plus", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "minusWithOrgJodaTimeReadablePeriod:", "minus", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "propertyWithOrgJodaTimeDateTimeFieldType:", "property", "Lorg.joda.time.Partial$Property;", 0x1, NULL },
    { "isMatchWithOrgJodaTimeReadableInstant:", "isMatch", "Z", 0x1, NULL },
    { "isMatchWithOrgJodaTimeReadablePartial:", "isMatch", "Z", 0x1, NULL },
    { "getFormatter", NULL, "Lorg.joda.time.format.DateTimeFormatter;", 0x1, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL },
    { "toStringList", NULL, "Ljava.lang.String;", 0x1, NULL },
    { "toStringWithNSString:", "toString", "Ljava.lang.String;", 0x1, NULL },
    { "toStringWithNSString:withJavaUtilLocale:", "toString", "Ljava.lang.String;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, .constantValue.asLong = OrgJodaTimePartial_serialVersionUID },
    { "iChronology_", NULL, 0x12, "Lorg.joda.time.Chronology;", NULL,  },
    { "iTypes_", NULL, 0x12, "[Lorg.joda.time.DateTimeFieldType;", NULL,  },
    { "iValues_", NULL, 0x12, "[I", NULL,  },
    { "iFormatter_", NULL, 0x82, "[Lorg.joda.time.format.DateTimeFormatter;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimePartial = { 1, "Partial", "org.joda.time", NULL, 0x11, 33, methods, 5, fields, 0, NULL};
  return &_OrgJodaTimePartial;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimePartial)

@implementation OrgJodaTimePartial_Property

- (instancetype)initWithOrgJodaTimePartial:(OrgJodaTimePartial *)partial
                                   withInt:(jint)fieldIndex {
  if (self = [super init]) {
    OrgJodaTimePartial_Property_set_iPartial_(self, partial);
    iFieldIndex_ = fieldIndex;
  }
  return self;
}

- (OrgJodaTimeDateTimeField *)getField {
  return [((OrgJodaTimePartial *) nil_chk(iPartial_)) getFieldWithInt:iFieldIndex_];
}

- (id<OrgJodaTimeReadablePartial>)getReadablePartial {
  return iPartial_;
}

- (OrgJodaTimePartial *)getPartial {
  return iPartial_;
}

- (jint)get {
  return [((OrgJodaTimePartial *) nil_chk(iPartial_)) getValueWithInt:iFieldIndex_];
}

- (OrgJodaTimePartial *)addToCopyWithInt:(jint)valueToAdd {
  IOSIntArray *newValues = [((OrgJodaTimePartial *) nil_chk(iPartial_)) getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getField])) addWithOrgJodaTimeReadablePartial:iPartial_ withInt:iFieldIndex_ withIntArray:newValues withInt:valueToAdd];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:iPartial_ withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)addWrapFieldToCopyWithInt:(jint)valueToAdd {
  IOSIntArray *newValues = [((OrgJodaTimePartial *) nil_chk(iPartial_)) getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getField])) addWrapFieldWithOrgJodaTimeReadablePartial:iPartial_ withInt:iFieldIndex_ withIntArray:newValues withInt:valueToAdd];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:iPartial_ withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)setCopyWithInt:(jint)value {
  IOSIntArray *newValues = [((OrgJodaTimePartial *) nil_chk(iPartial_)) getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getField])) setWithOrgJodaTimeReadablePartial:iPartial_ withInt:iFieldIndex_ withIntArray:newValues withInt:value];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:iPartial_ withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)setCopyWithNSString:(NSString *)text
                         withJavaUtilLocale:(JavaUtilLocale *)locale {
  IOSIntArray *newValues = [((OrgJodaTimePartial *) nil_chk(iPartial_)) getValues];
  newValues = [((OrgJodaTimeDateTimeField *) nil_chk([self getField])) setWithOrgJodaTimeReadablePartial:iPartial_ withInt:iFieldIndex_ withIntArray:newValues withNSString:text withJavaUtilLocale:locale];
  return [[[OrgJodaTimePartial alloc] initWithOrgJodaTimePartial:iPartial_ withIntArray:newValues] autorelease];
}

- (OrgJodaTimePartial *)setCopyWithNSString:(NSString *)text {
  return [self setCopyWithNSString:text withJavaUtilLocale:nil];
}

- (OrgJodaTimePartial *)withMaximumValue {
  return [self setCopyWithInt:[self getMaximumValue]];
}

- (OrgJodaTimePartial *)withMinimumValue {
  return [self setCopyWithInt:[self getMinimumValue]];
}

- (void)dealloc {
  RELEASE_(iPartial_);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimePartial_Property *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimePartial_Property_set_iPartial_(other, iPartial_);
  other->iFieldIndex_ = iFieldIndex_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgJodaTimePartial:withInt:", "Property", NULL, 0x0, NULL },
    { "getField", NULL, "Lorg.joda.time.DateTimeField;", 0x1, NULL },
    { "getReadablePartial", NULL, "Lorg.joda.time.ReadablePartial;", 0x4, NULL },
    { "getPartial", NULL, "Lorg.joda.time.Partial;", 0x1, NULL },
    { "get", NULL, "I", 0x1, NULL },
    { "addToCopyWithInt:", "addToCopy", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "addWrapFieldToCopyWithInt:", "addWrapFieldToCopy", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "setCopyWithInt:", "setCopy", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "setCopyWithNSString:withJavaUtilLocale:", "setCopy", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "setCopyWithNSString:", "setCopy", "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withMaximumValue", NULL, "Lorg.joda.time.Partial;", 0x1, NULL },
    { "withMinimumValue", NULL, "Lorg.joda.time.Partial;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, .constantValue.asLong = OrgJodaTimePartial_Property_serialVersionUID },
    { "iPartial_", NULL, 0x12, "Lorg.joda.time.Partial;", NULL,  },
    { "iFieldIndex_", NULL, 0x12, "I", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimePartial_Property = { 1, "Property", "org.joda.time", "Partial", 0x9, 12, methods, 3, fields, 0, NULL};
  return &_OrgJodaTimePartial_Property;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimePartial_Property)
