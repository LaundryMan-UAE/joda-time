//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/nbransby/Documents/joda-time/src/main/java/org/joda/time/format/PeriodFormatterBuilder.java
//

#include "DateTimeConstants.h"
#include "DurationFieldType.h"
#include "FormatUtils.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "PeriodFormatter.h"
#include "PeriodFormatterBuilder.h"
#include "PeriodParser.h"
#include "PeriodPrinter.h"
#include "PeriodType.h"
#include "ReadWritablePeriod.h"
#include "ReadablePeriod.h"
#include "java/io/IOException.h"
#include "java/io/Writer.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuffer.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/Collections.h"
#include "java/util/Comparator.h"
#include "java/util/HashSet.h"
#include "java/util/List.h"
#include "java/util/Locale.h"
#include "java/util/Set.h"
#include "java/util/TreeSet.h"
#include "java/util/concurrent/ConcurrentHashMap.h"
#include "java/util/concurrent/ConcurrentMap.h"
#include "java/util/regex/Matcher.h"
#include "java/util/regex/Pattern.h"

#pragma clang diagnostic ignored "-Wprotocol"

__attribute__((unused)) static OrgJodaTimeFormatPeriodFormatter *OrgJodaTimeFormatPeriodFormatterBuilder_toFormatterWithJavaUtilList_withBoolean_withBoolean_(id<JavaUtilList> elementPairs, jboolean notPrinter, jboolean notParser);
__attribute__((unused)) static IOSObjectArray *OrgJodaTimeFormatPeriodFormatterBuilder_createCompositeWithJavaUtilList_(id<JavaUtilList> elementPairs);

BOOL OrgJodaTimeFormatPeriodFormatterBuilder_initialized = NO;

@implementation OrgJodaTimeFormatPeriodFormatterBuilder

id<JavaUtilConcurrentConcurrentMap> OrgJodaTimeFormatPeriodFormatterBuilder_PATTERNS_;

- (instancetype)init {
  if (self = [super init]) {
    [self clear];
  }
  return self;
}

- (OrgJodaTimeFormatPeriodFormatter *)toFormatter {
  OrgJodaTimeFormatPeriodFormatter *formatter = OrgJodaTimeFormatPeriodFormatterBuilder_toFormatterWithJavaUtilList_withBoolean_withBoolean_(iElementPairs_, iNotPrinter_, iNotParser_);
  {
    IOSObjectArray *a__ = iFieldFormatters_;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *fieldFormatter = *b__++;
      if (fieldFormatter != nil) {
        [fieldFormatter finishWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:iFieldFormatters_];
      }
    }
  }
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iFieldFormatters_(self, (IOSObjectArray *) check_class_cast([((IOSObjectArray *) nil_chk(iFieldFormatters_)) clone], [IOSObjectArray class]));
  return formatter;
}

- (id<OrgJodaTimeFormatPeriodPrinter>)toPrinter {
  if (iNotPrinter_) {
    return nil;
  }
  return [((OrgJodaTimeFormatPeriodFormatter *) nil_chk([self toFormatter])) getPrinter];
}

- (id<OrgJodaTimeFormatPeriodParser>)toParser {
  if (iNotParser_) {
    return nil;
  }
  return [((OrgJodaTimeFormatPeriodFormatter *) nil_chk([self toFormatter])) getParser];
}

- (void)clear {
  iMinPrintedDigits_ = 1;
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_LAST;
  iMaxParsedDigits_ = 10;
  iRejectSignedValues_ = NO;
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(self, nil);
  if (iElementPairs_ == nil) {
    OrgJodaTimeFormatPeriodFormatterBuilder_setAndConsume_iElementPairs_(self, [[JavaUtilArrayList alloc] init]);
  }
  else {
    [iElementPairs_ clear];
  }
  iNotPrinter_ = NO;
  iNotParser_ = NO;
  OrgJodaTimeFormatPeriodFormatterBuilder_setAndConsume_iFieldFormatters_(self, [IOSObjectArray newArrayWithLength:10 type:[IOSClass classWithClass:[OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter class]]]);
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendWithOrgJodaTimeFormatPeriodFormatter:(OrgJodaTimeFormatPeriodFormatter *)formatter {
  if (formatter == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"No formatter supplied"] autorelease];
  }
  [self clearPrefix];
  [self append0WithOrgJodaTimeFormatPeriodPrinter:[((OrgJodaTimeFormatPeriodFormatter *) nil_chk(formatter)) getPrinter] withOrgJodaTimeFormatPeriodParser:[formatter getParser]];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendWithOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>)printer
                                                    withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>)parser {
  if (printer == nil && parser == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"No printer or parser supplied"] autorelease];
  }
  [self clearPrefix];
  [self append0WithOrgJodaTimeFormatPeriodPrinter:printer withOrgJodaTimeFormatPeriodParser:parser];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendLiteralWithNSString:(NSString *)text {
  if (text == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:@"Literal must not be null"] autorelease];
  }
  [self clearPrefix];
  OrgJodaTimeFormatPeriodFormatterBuilder_Literal *literal = [[[OrgJodaTimeFormatPeriodFormatterBuilder_Literal alloc] initWithNSString:text] autorelease];
  [self append0WithOrgJodaTimeFormatPeriodPrinter:literal withOrgJodaTimeFormatPeriodParser:literal];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)minimumPrintedDigitsWithInt:(jint)minDigits {
  iMinPrintedDigits_ = minDigits;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)maximumParsedDigitsWithInt:(jint)maxDigits {
  iMaxParsedDigits_ = maxDigits;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)rejectSignedValuesWithBoolean:(jboolean)v {
  iRejectSignedValues_ = v;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)printZeroRarelyLast {
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_LAST;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)printZeroRarelyFirst {
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_FIRST;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)printZeroIfSupported {
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_IF_SUPPORTED;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)printZeroAlways {
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_ALWAYS;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)printZeroNever {
  iPrintZeroSetting_ = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_NEVER;
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendPrefixWithNSString:(NSString *)text {
  if (text == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendPrefixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix alloc] initWithNSString:text] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendPrefixWithNSString:(NSString *)singularText
                                                         withNSString:(NSString *)pluralText {
  if (singularText == nil || pluralText == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendPrefixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix alloc] initWithNSString:singularText withNSString:pluralText] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendPrefixWithNSStringArray:(IOSObjectArray *)regularExpressions
                                                         withNSStringArray:(IOSObjectArray *)prefixes {
  if (regularExpressions == nil || prefixes == nil || regularExpressions->size_ < 1 || regularExpressions->size_ != prefixes->size_) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendPrefixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix alloc] initWithNSStringArray:regularExpressions withNSStringArray:prefixes] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendPrefixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)prefix {
  if (prefix == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  if (iPrefix_ != nil) {
    prefix = [[[OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix alloc] initWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:iPrefix_ withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:prefix] autorelease];
  }
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(self, prefix);
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendYears {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_YEARS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendMonths {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_MONTHS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendWeeks {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_WEEKS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendDays {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_DAYS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendHours {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_HOURS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendMinutes {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_MINUTES];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeconds {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSecondsWithMillis {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSecondsWithOptionalMillis {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendMillis {
  [self appendFieldWithInt:OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS];
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendMillis3Digit {
  [self appendFieldWithInt:7 withInt:3];
  return self;
}

- (void)appendFieldWithInt:(jint)type {
  [self appendFieldWithInt:type withInt:iMinPrintedDigits_];
}

- (void)appendFieldWithInt:(jint)type
                   withInt:(jint)minPrinted {
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *field = [[[OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter alloc] initWithInt:minPrinted withInt:iPrintZeroSetting_ withInt:iMaxParsedDigits_ withBoolean:iRejectSignedValues_ withInt:type withOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:iFieldFormatters_ withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:iPrefix_ withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:nil] autorelease];
  [self append0WithOrgJodaTimeFormatPeriodPrinter:field withOrgJodaTimeFormatPeriodParser:field];
  IOSObjectArray_Set(nil_chk(iFieldFormatters_), type, field);
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(self, nil);
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSuffixWithNSString:(NSString *)text {
  if (text == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendSuffixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix alloc] initWithNSString:text] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSuffixWithNSString:(NSString *)singularText
                                                         withNSString:(NSString *)pluralText {
  if (singularText == nil || pluralText == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendSuffixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix alloc] initWithNSString:singularText withNSString:pluralText] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSuffixWithNSStringArray:(IOSObjectArray *)regularExpressions
                                                         withNSStringArray:(IOSObjectArray *)suffixes {
  if (regularExpressions == nil || suffixes == nil || regularExpressions->size_ < 1 || regularExpressions->size_ != suffixes->size_) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  return [self appendSuffixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:[[[OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix alloc] initWithNSStringArray:regularExpressions withNSStringArray:suffixes] autorelease]];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSuffixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)suffix {
  id originalPrinter;
  id originalParser;
  if ([((id<JavaUtilList>) nil_chk(iElementPairs_)) size] > 0) {
    originalPrinter = [iElementPairs_ getWithInt:[iElementPairs_ size] - 2];
    originalParser = [iElementPairs_ getWithInt:[iElementPairs_ size] - 1];
  }
  else {
    originalPrinter = nil;
    originalParser = nil;
  }
  if (originalPrinter == nil || originalParser == nil || originalPrinter != originalParser || !([originalPrinter isKindOfClass:[OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter class]])) {
    @throw [[[JavaLangIllegalStateException alloc] initWithNSString:@"No field to apply suffix to"] autorelease];
  }
  [self clearPrefix];
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *newField = [[[OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter alloc] initWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter:(OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *) check_class_cast(originalPrinter, [OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter class]) withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:suffix] autorelease];
  [iElementPairs_ setWithInt:[iElementPairs_ size] - 2 withId:newField];
  [iElementPairs_ setWithInt:[iElementPairs_ size] - 1 withId:newField];
  IOSObjectArray_Set(nil_chk(iFieldFormatters_), [newField getFieldType], newField);
  return self;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorWithNSString:(NSString *)text {
  return [self appendSeparatorWithNSString:text withNSString:text withNSStringArray:nil withBoolean:YES withBoolean:YES];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorIfFieldsAfterWithNSString:(NSString *)text {
  return [self appendSeparatorWithNSString:text withNSString:text withNSStringArray:nil withBoolean:NO withBoolean:YES];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorIfFieldsBeforeWithNSString:(NSString *)text {
  return [self appendSeparatorWithNSString:text withNSString:text withNSStringArray:nil withBoolean:YES withBoolean:NO];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorWithNSString:(NSString *)text
                                                            withNSString:(NSString *)finalText {
  return [self appendSeparatorWithNSString:text withNSString:finalText withNSStringArray:nil withBoolean:YES withBoolean:YES];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorWithNSString:(NSString *)text
                                                            withNSString:(NSString *)finalText
                                                       withNSStringArray:(IOSObjectArray *)variants {
  return [self appendSeparatorWithNSString:text withNSString:finalText withNSStringArray:variants withBoolean:YES withBoolean:YES];
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)appendSeparatorWithNSString:(NSString *)text
                                                            withNSString:(NSString *)finalText
                                                       withNSStringArray:(IOSObjectArray *)variants
                                                             withBoolean:(jboolean)useBefore
                                                             withBoolean:(jboolean)useAfter {
  if (text == nil || finalText == nil) {
    @throw [[[JavaLangIllegalArgumentException alloc] init] autorelease];
  }
  [self clearPrefix];
  id<JavaUtilList> pairs = iElementPairs_;
  if ([((id<JavaUtilList>) nil_chk(pairs)) size] == 0) {
    if (useAfter && useBefore == NO) {
      OrgJodaTimeFormatPeriodFormatterBuilder_Separator *separator = [[[OrgJodaTimeFormatPeriodFormatterBuilder_Separator alloc] initWithNSString:text withNSString:finalText withNSStringArray:variants withOrgJodaTimeFormatPeriodPrinter:OrgJodaTimeFormatPeriodFormatterBuilder_Literal_get_EMPTY_() withOrgJodaTimeFormatPeriodParser:OrgJodaTimeFormatPeriodFormatterBuilder_Literal_get_EMPTY_() withBoolean:useBefore withBoolean:useAfter] autorelease];
      [self append0WithOrgJodaTimeFormatPeriodPrinter:separator withOrgJodaTimeFormatPeriodParser:separator];
    }
    return self;
  }
  jint i;
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator *lastSeparator = nil;
  for (i = [pairs size]; --i >= 0; ) {
    if ([[pairs getWithInt:i] isKindOfClass:[OrgJodaTimeFormatPeriodFormatterBuilder_Separator class]]) {
      lastSeparator = (OrgJodaTimeFormatPeriodFormatterBuilder_Separator *) check_class_cast([pairs getWithInt:i], [OrgJodaTimeFormatPeriodFormatterBuilder_Separator class]);
      pairs = [pairs subListWithInt:i + 1 withInt:[pairs size]];
      break;
    }
    i--;
  }
  if (lastSeparator != nil && [((id<JavaUtilList>) nil_chk(pairs)) size] == 0) {
    @throw [[[JavaLangIllegalStateException alloc] initWithNSString:@"Cannot have two adjacent separators"] autorelease];
  }
  else {
    IOSObjectArray *comp = OrgJodaTimeFormatPeriodFormatterBuilder_createCompositeWithJavaUtilList_(pairs);
    [((id<JavaUtilList>) nil_chk(pairs)) clear];
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator *separator = [[[OrgJodaTimeFormatPeriodFormatterBuilder_Separator alloc] initWithNSString:text withNSString:finalText withNSStringArray:variants withOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>) check_protocol_cast(IOSObjectArray_Get(nil_chk(comp), 0), @protocol(OrgJodaTimeFormatPeriodPrinter)) withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>) check_protocol_cast(IOSObjectArray_Get(comp, 1), @protocol(OrgJodaTimeFormatPeriodParser)) withBoolean:useBefore withBoolean:useAfter] autorelease];
    [pairs addWithId:separator];
    [pairs addWithId:separator];
  }
  return self;
}

- (void)clearPrefix {
  if (iPrefix_ != nil) {
    @throw [[[JavaLangIllegalStateException alloc] initWithNSString:@"Prefix not followed by field"] autorelease];
  }
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(self, nil);
}

- (OrgJodaTimeFormatPeriodFormatterBuilder *)append0WithOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>)printer
                                                     withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>)parser {
  [((id<JavaUtilList>) nil_chk(iElementPairs_)) addWithId:printer];
  [iElementPairs_ addWithId:parser];
  iNotPrinter_ |= (printer == nil);
  iNotParser_ |= (parser == nil);
  return self;
}

+ (OrgJodaTimeFormatPeriodFormatter *)toFormatterWithJavaUtilList:(id<JavaUtilList>)elementPairs
                                                      withBoolean:(jboolean)notPrinter
                                                      withBoolean:(jboolean)notParser {
  return OrgJodaTimeFormatPeriodFormatterBuilder_toFormatterWithJavaUtilList_withBoolean_withBoolean_(elementPairs, notPrinter, notParser);
}

+ (IOSObjectArray *)createCompositeWithJavaUtilList:(id<JavaUtilList>)elementPairs {
  return OrgJodaTimeFormatPeriodFormatterBuilder_createCompositeWithJavaUtilList_(elementPairs);
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iElementPairs_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iFieldFormatters_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder *)other {
  [super copyAllFieldsTo:other];
  other->iMinPrintedDigits_ = iMinPrintedDigits_;
  other->iPrintZeroSetting_ = iPrintZeroSetting_;
  other->iMaxParsedDigits_ = iMaxParsedDigits_;
  other->iRejectSignedValues_ = iRejectSignedValues_;
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iPrefix_(other, iPrefix_);
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iElementPairs_(other, iElementPairs_);
  other->iNotPrinter_ = iNotPrinter_;
  other->iNotParser_ = iNotParser_;
  OrgJodaTimeFormatPeriodFormatterBuilder_set_iFieldFormatters_(other, iFieldFormatters_);
}

+ (void)initialize {
  if (self == [OrgJodaTimeFormatPeriodFormatterBuilder class]) {
    JreStrongAssignAndConsume(&OrgJodaTimeFormatPeriodFormatterBuilder_PATTERNS_, nil, [[JavaUtilConcurrentConcurrentHashMap alloc] init]);
    J2OBJC_SET_INITIALIZED(OrgJodaTimeFormatPeriodFormatterBuilder)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "PeriodFormatterBuilder", NULL, 0x1, NULL },
    { "toFormatter", NULL, "Lorg.joda.time.format.PeriodFormatter;", 0x1, NULL },
    { "toPrinter", NULL, "Lorg.joda.time.format.PeriodPrinter;", 0x1, NULL },
    { "toParser", NULL, "Lorg.joda.time.format.PeriodParser;", 0x1, NULL },
    { "clear", NULL, "V", 0x1, NULL },
    { "appendWithOrgJodaTimeFormatPeriodFormatter:", "append", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendWithOrgJodaTimeFormatPeriodPrinter:withOrgJodaTimeFormatPeriodParser:", "append", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendLiteralWithNSString:", "appendLiteral", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "minimumPrintedDigitsWithInt:", "minimumPrintedDigits", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "maximumParsedDigitsWithInt:", "maximumParsedDigits", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "rejectSignedValuesWithBoolean:", "rejectSignedValues", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "printZeroRarelyLast", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "printZeroRarelyFirst", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "printZeroIfSupported", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "printZeroAlways", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "printZeroNever", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendPrefixWithNSString:", "appendPrefix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendPrefixWithNSString:withNSString:", "appendPrefix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendPrefixWithNSStringArray:withNSStringArray:", "appendPrefix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendPrefixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:", "appendPrefix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x2, NULL },
    { "appendYears", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendMonths", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendWeeks", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendDays", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendHours", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendMinutes", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeconds", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSecondsWithMillis", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSecondsWithOptionalMillis", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendMillis", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendMillis3Digit", NULL, "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendFieldWithInt:", "appendField", "V", 0x2, NULL },
    { "appendFieldWithInt:withInt:", "appendField", "V", 0x2, NULL },
    { "appendSuffixWithNSString:", "appendSuffix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSuffixWithNSString:withNSString:", "appendSuffix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSuffixWithNSStringArray:withNSStringArray:", "appendSuffix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSuffixWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:", "appendSuffix", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x2, NULL },
    { "appendSeparatorWithNSString:", "appendSeparator", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeparatorIfFieldsAfterWithNSString:", "appendSeparatorIfFieldsAfter", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeparatorIfFieldsBeforeWithNSString:", "appendSeparatorIfFieldsBefore", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeparatorWithNSString:withNSString:", "appendSeparator", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeparatorWithNSString:withNSString:withNSStringArray:", "appendSeparator", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x1, NULL },
    { "appendSeparatorWithNSString:withNSString:withNSStringArray:withBoolean:withBoolean:", "appendSeparator", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x2, NULL },
    { "clearPrefix", NULL, "V", 0x2, "Ljava.lang.IllegalStateException;" },
    { "append0WithOrgJodaTimeFormatPeriodPrinter:withOrgJodaTimeFormatPeriodParser:", "append0", "Lorg.joda.time.format.PeriodFormatterBuilder;", 0x2, NULL },
    { "toFormatterWithJavaUtilList:withBoolean:withBoolean:", "toFormatter", "Lorg.joda.time.format.PeriodFormatter;", 0xa, NULL },
    { "createCompositeWithJavaUtilList:", "createComposite", "[Ljava.lang.Object;", 0xa, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "PRINT_ZERO_RARELY_FIRST_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_FIRST },
    { "PRINT_ZERO_RARELY_LAST_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_LAST },
    { "PRINT_ZERO_IF_SUPPORTED_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_IF_SUPPORTED },
    { "PRINT_ZERO_ALWAYS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_ALWAYS },
    { "PRINT_ZERO_NEVER_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_NEVER },
    { "YEARS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_YEARS },
    { "MONTHS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_MONTHS },
    { "WEEKS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_WEEKS },
    { "DAYS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_DAYS },
    { "HOURS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_HOURS },
    { "MINUTES_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_MINUTES },
    { "SECONDS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS },
    { "MILLIS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS },
    { "SECONDS_MILLIS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS },
    { "SECONDS_OPTIONAL_MILLIS_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS },
    { "MAX_FIELD_", NULL, 0x1a, "I", NULL, .constantValue.asInt = OrgJodaTimeFormatPeriodFormatterBuilder_MAX_FIELD },
    { "PATTERNS_", NULL, 0x1a, "Ljava.util.concurrent.ConcurrentMap;", &OrgJodaTimeFormatPeriodFormatterBuilder_PATTERNS_,  },
    { "iMinPrintedDigits_", NULL, 0x2, "I", NULL,  },
    { "iPrintZeroSetting_", NULL, 0x2, "I", NULL,  },
    { "iMaxParsedDigits_", NULL, 0x2, "I", NULL,  },
    { "iRejectSignedValues_", NULL, 0x2, "Z", NULL,  },
    { "iPrefix_", NULL, 0x2, "Lorg.joda.time.format.PeriodFormatterBuilder$PeriodFieldAffix;", NULL,  },
    { "iElementPairs_", NULL, 0x2, "Ljava.util.List;", NULL,  },
    { "iNotPrinter_", NULL, 0x2, "Z", NULL,  },
    { "iNotParser_", NULL, 0x2, "Z", NULL,  },
    { "iFieldFormatters_", NULL, 0x2, "[Lorg.joda.time.format.PeriodFormatterBuilder$FieldFormatter;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder = { "PeriodFormatterBuilder", "org.joda.time.format", NULL, 0x1, 47, methods, 26, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder;
}

@end

OrgJodaTimeFormatPeriodFormatter *OrgJodaTimeFormatPeriodFormatterBuilder_toFormatterWithJavaUtilList_withBoolean_withBoolean_(id<JavaUtilList> elementPairs, jboolean notPrinter, jboolean notParser) {
  OrgJodaTimeFormatPeriodFormatterBuilder_init();
  if (notPrinter && notParser) {
    @throw [[[JavaLangIllegalStateException alloc] initWithNSString:@"Builder has created neither a printer nor a parser"] autorelease];
  }
  jint size = [((id<JavaUtilList>) nil_chk(elementPairs)) size];
  if (size >= 2 && [[elementPairs getWithInt:0] isKindOfClass:[OrgJodaTimeFormatPeriodFormatterBuilder_Separator class]]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator *sep = (OrgJodaTimeFormatPeriodFormatterBuilder_Separator *) check_class_cast([elementPairs getWithInt:0], [OrgJodaTimeFormatPeriodFormatterBuilder_Separator class]);
    if (((OrgJodaTimeFormatPeriodFormatterBuilder_Separator *) nil_chk(sep))->iAfterParser_ == nil && sep->iAfterPrinter_ == nil) {
      OrgJodaTimeFormatPeriodFormatter *f = OrgJodaTimeFormatPeriodFormatterBuilder_toFormatterWithJavaUtilList_withBoolean_withBoolean_([elementPairs subListWithInt:2 withInt:size], notPrinter, notParser);
      sep = [sep finishWithOrgJodaTimeFormatPeriodPrinter:[((OrgJodaTimeFormatPeriodFormatter *) nil_chk(f)) getPrinter] withOrgJodaTimeFormatPeriodParser:[f getParser]];
      return [[[OrgJodaTimeFormatPeriodFormatter alloc] initWithOrgJodaTimeFormatPeriodPrinter:sep withOrgJodaTimeFormatPeriodParser:sep] autorelease];
    }
  }
  IOSObjectArray *comp = OrgJodaTimeFormatPeriodFormatterBuilder_createCompositeWithJavaUtilList_(elementPairs);
  if (notPrinter) {
    return [[[OrgJodaTimeFormatPeriodFormatter alloc] initWithOrgJodaTimeFormatPeriodPrinter:nil withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>) check_protocol_cast(IOSObjectArray_Get(nil_chk(comp), 1), @protocol(OrgJodaTimeFormatPeriodParser))] autorelease];
  }
  else if (notParser) {
    return [[[OrgJodaTimeFormatPeriodFormatter alloc] initWithOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>) check_protocol_cast(IOSObjectArray_Get(nil_chk(comp), 0), @protocol(OrgJodaTimeFormatPeriodPrinter)) withOrgJodaTimeFormatPeriodParser:nil] autorelease];
  }
  else {
    return [[[OrgJodaTimeFormatPeriodFormatter alloc] initWithOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>) check_protocol_cast(IOSObjectArray_Get(nil_chk(comp), 0), @protocol(OrgJodaTimeFormatPeriodPrinter)) withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>) check_protocol_cast(IOSObjectArray_Get(comp, 1), @protocol(OrgJodaTimeFormatPeriodParser))] autorelease];
  }
}

IOSObjectArray *OrgJodaTimeFormatPeriodFormatterBuilder_createCompositeWithJavaUtilList_(id<JavaUtilList> elementPairs) {
  OrgJodaTimeFormatPeriodFormatterBuilder_init();
  {
    OrgJodaTimeFormatPeriodFormatterBuilder_Composite *comp;
    switch ([((id<JavaUtilList>) nil_chk(elementPairs)) size]) {
      case 0:
      return [IOSObjectArray arrayWithObjects:(id[]){ OrgJodaTimeFormatPeriodFormatterBuilder_Literal_get_EMPTY_(), OrgJodaTimeFormatPeriodFormatterBuilder_Literal_get_EMPTY_() } count:2 type:[IOSClass classWithClass:[NSObject class]]];
      case 1:
      return [IOSObjectArray arrayWithObjects:(id[]){ [elementPairs getWithInt:0], [elementPairs getWithInt:1] } count:2 type:[IOSClass classWithClass:[NSObject class]]];
      default:
      comp = [[[OrgJodaTimeFormatPeriodFormatterBuilder_Composite alloc] initWithJavaUtilList:elementPairs] autorelease];
      return [IOSObjectArray arrayWithObjects:(id[]){ comp, comp } count:2 type:[IOSClass classWithClass:[NSObject class]]];
    }
  }
}

@interface OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix : NSObject
@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "calculatePrintedLengthWithInt:", "calculatePrintedLength", "I", 0x401, NULL },
    { "printToWithJavaLangStringBuffer:withInt:", "printTo", "V", 0x401, NULL },
    { "printToWithJavaIoWriter:withInt:", "printTo", "V", 0x401, "Ljava.io.IOException;" },
    { "parseWithNSString:withInt:", "parse", "I", 0x401, NULL },
    { "scanWithNSString:withInt:", "scan", "I", 0x401, NULL },
    { "getAffixes", NULL, "[Ljava.lang.String;", 0x401, NULL },
    { "finishWithJavaUtilSet:", "finish", "V", 0x401, NULL },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix = { "PeriodFieldAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x208, 7, methods, 0, NULL, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix;
}

@end


@implementation OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix

- (void)finishWithJavaUtilSet:(id<JavaUtilSet>)periodFieldAffixesToIgnore {
  if (iOtherAffixes_ == nil) {
    jint shortestAffixLength = JavaLangInteger_MAX_VALUE;
    {
      IOSObjectArray *a__ = [self getAffixes];
      NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      NSString * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        NSString *affix = *b__++;
        if (((jint) [((NSString *) nil_chk(affix)) length]) < shortestAffixLength) {
          shortestAffixLength = ((jint) [affix length]);
        }
      }
    }
    id<JavaUtilSet> affixesToIgnore = [[[JavaUtilHashSet alloc] init] autorelease];
    for (id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix> __strong periodFieldAffixToIgnore in nil_chk(periodFieldAffixesToIgnore)) {
      if (periodFieldAffixToIgnore != nil) {
        {
          IOSObjectArray *a__ = [periodFieldAffixToIgnore getAffixes];
          NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
          NSString * const *e__ = b__ + a__->size_;
          while (b__ < e__) {
            NSString *affixToIgnore = *b__++;
            if (((jint) [((NSString *) nil_chk(affixToIgnore)) length]) > shortestAffixLength) {
              [affixesToIgnore addWithId:affixToIgnore];
            }
          }
        }
      }
    }
    OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix_set_iOtherAffixes_(self, [affixesToIgnore toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[affixesToIgnore size] type:[IOSClass classWithClass:[NSString class]]]]);
  }
}

- (jboolean)matchesOtherAffixWithInt:(jint)textLength
                        withNSString:(NSString *)periodStr
                             withInt:(jint)position {
  if (iOtherAffixes_ != nil) {
    {
      IOSObjectArray *a__ = iOtherAffixes_;
      NSString * const *b__ = a__->buffer_;
      NSString * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        NSString *affixToIgnore = *b__++;
        jint textToIgnoreLength = ((jint) [((NSString *) nil_chk(affixToIgnore)) length]);
        if (textLength < textToIgnoreLength && [((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:affixToIgnore otherOffset:0 count:textToIgnoreLength]) {
          return YES;
        }
      }
    }
  }
  return NO;
}

- (instancetype)init {
  return [super init];
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix_set_iOtherAffixes_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix_set_iOtherAffixes_(other, iOtherAffixes_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "finishWithJavaUtilSet:", "finish", "V", 0x1, NULL },
    { "matchesOtherAffixWithInt:withNSString:withInt:", "matchesOtherAffix", "Z", 0x4, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iOtherAffixes_", NULL, 0x42, "[Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix = { "IgnorableAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x408, 3, methods, 1, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_IgnorableAffix;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix

- (instancetype)initWithNSString:(NSString *)text {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix_set_iText_(self, text);
  }
  return self;
}

- (jint)calculatePrintedLengthWithInt:(jint)value {
  return ((jint) [((NSString *) nil_chk(iText_)) length]);
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
                                withInt:(jint)value {
  [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:iText_];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
                        withInt:(jint)value {
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:iText_];
}

- (jint)parseWithNSString:(NSString *)periodStr
                  withInt:(jint)position {
  NSString *text = iText_;
  jint textLength = ((jint) [((NSString *) nil_chk(text)) length]);
  if ([((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:text otherOffset:0 count:textLength]) {
    if (![self matchesOtherAffixWithInt:textLength withNSString:periodStr withInt:position]) {
      return position + textLength;
    }
  }
  return ~position;
}

- (jint)scanWithNSString:(NSString *)periodStr
                 withInt:(jint)position {
  NSString *text = iText_;
  jint textLength = ((jint) [((NSString *) nil_chk(text)) length]);
  jint sourceLength = ((jint) [((NSString *) nil_chk(periodStr)) length]);
  for (jint pos = position; pos < sourceLength; pos++) {
    if ([periodStr regionMatches:YES thisOffset:pos aString:text otherOffset:0 count:textLength]) {
      if (![self matchesOtherAffixWithInt:textLength withNSString:periodStr withInt:pos]) {
        return pos;
      }
    }
    switch ([periodStr charAtWithInt:pos]) {
      case '0':
      case '1':
      case '2':
      case '3':
      case '4':
      case '5':
      case '6':
      case '7':
      case '8':
      case '9':
      case '.':
      case ',':
      case '+':
      case '-':
      break;
      default:
      goto break_search;
    }
  }
  break_search: ;
  return ~position;
}

- (IOSObjectArray *)getAffixes {
  return [IOSObjectArray arrayWithObjects:(id[]){ iText_ } count:1 type:[IOSClass classWithClass:[NSString class]]];
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix_set_iText_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix_set_iText_(other, iText_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:", "SimpleAffix", NULL, 0x0, NULL },
    { "calculatePrintedLengthWithInt:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withInt:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withInt:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseWithNSString:withInt:", "parse", "I", 0x1, NULL },
    { "scanWithNSString:withInt:", "scan", "I", 0x1, NULL },
    { "getAffixes", NULL, "[Ljava.lang.String;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix = { "SimpleAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 7, methods, 1, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_SimpleAffix;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix

- (instancetype)initWithNSString:(NSString *)singularText
                    withNSString:(NSString *)pluralText {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iSingularText_(self, singularText);
    OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iPluralText_(self, pluralText);
  }
  return self;
}

- (jint)calculatePrintedLengthWithInt:(jint)value {
  return ((jint) [(value == 1 ? iSingularText_ : iPluralText_) length]);
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
                                withInt:(jint)value {
  [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:value == 1 ? iSingularText_ : iPluralText_];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
                        withInt:(jint)value {
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:value == 1 ? iSingularText_ : iPluralText_];
}

- (jint)parseWithNSString:(NSString *)periodStr
                  withInt:(jint)position {
  NSString *text1 = iPluralText_;
  NSString *text2 = iSingularText_;
  if (((jint) [((NSString *) nil_chk(text1)) length]) < ((jint) [((NSString *) nil_chk(text2)) length])) {
    NSString *temp = text1;
    text1 = text2;
    text2 = temp;
  }
  if ([((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:text1 otherOffset:0 count:((jint) [text1 length])]) {
    if (![self matchesOtherAffixWithInt:((jint) [text1 length]) withNSString:periodStr withInt:position]) {
      return position + ((jint) [text1 length]);
    }
  }
  if ([periodStr regionMatches:YES thisOffset:position aString:text2 otherOffset:0 count:((jint) [text2 length])]) {
    if (![self matchesOtherAffixWithInt:((jint) [text2 length]) withNSString:periodStr withInt:position]) {
      return position + ((jint) [text2 length]);
    }
  }
  return ~position;
}

- (jint)scanWithNSString:(NSString *)periodStr
                 withInt:(jint)position {
  NSString *text1 = iPluralText_;
  NSString *text2 = iSingularText_;
  if (((jint) [((NSString *) nil_chk(text1)) length]) < ((jint) [((NSString *) nil_chk(text2)) length])) {
    NSString *temp = text1;
    text1 = text2;
    text2 = temp;
  }
  jint textLength1 = ((jint) [text1 length]);
  jint textLength2 = ((jint) [text2 length]);
  jint sourceLength = ((jint) [((NSString *) nil_chk(periodStr)) length]);
  for (jint pos = position; pos < sourceLength; pos++) {
    if ([periodStr regionMatches:YES thisOffset:pos aString:text1 otherOffset:0 count:textLength1]) {
      if (![self matchesOtherAffixWithInt:((jint) [text1 length]) withNSString:periodStr withInt:pos]) {
        return pos;
      }
    }
    if ([periodStr regionMatches:YES thisOffset:pos aString:text2 otherOffset:0 count:textLength2]) {
      if (![self matchesOtherAffixWithInt:((jint) [text2 length]) withNSString:periodStr withInt:pos]) {
        return pos;
      }
    }
  }
  return ~position;
}

- (IOSObjectArray *)getAffixes {
  return [IOSObjectArray arrayWithObjects:(id[]){ iSingularText_, iPluralText_ } count:2 type:[IOSClass classWithClass:[NSString class]]];
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iSingularText_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iPluralText_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iSingularText_(other, iSingularText_);
  OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix_set_iPluralText_(other, iPluralText_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withNSString:", "PluralAffix", NULL, 0x0, NULL },
    { "calculatePrintedLengthWithInt:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withInt:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withInt:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseWithNSString:withInt:", "parse", "I", 0x1, NULL },
    { "scanWithNSString:withInt:", "scan", "I", 0x1, NULL },
    { "getAffixes", NULL, "[Ljava.lang.String;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iSingularText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
    { "iPluralText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix = { "PluralAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 7, methods, 2, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_PluralAffix;
}

@end

BOOL OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_initialized = NO;

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix

id<JavaUtilComparator> OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_LENGTH_DESC_COMPARATOR_;

- (instancetype)initWithNSStringArray:(IOSObjectArray *)regExes
                    withNSStringArray:(IOSObjectArray *)texts {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixes_(self, [((IOSObjectArray *) nil_chk(texts)) clone]);
    OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_setAndConsume_iPatterns_(self, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(regExes))->size_ type:[IOSClass classWithClass:[JavaUtilRegexPattern class]]]);
    for (jint i = 0; i < regExes->size_; i++) {
      JavaUtilRegexPattern *pattern = [((id<JavaUtilConcurrentConcurrentMap>) nil_chk(OrgJodaTimeFormatPeriodFormatterBuilder_get_PATTERNS_())) getWithId:IOSObjectArray_Get(regExes, i)];
      if (pattern == nil) {
        pattern = JavaUtilRegexPattern_compileWithNSString_(IOSObjectArray_Get(regExes, i));
        [OrgJodaTimeFormatPeriodFormatterBuilder_get_PATTERNS_() putIfAbsentWithId:IOSObjectArray_Get(regExes, i) withId:pattern];
      }
      IOSObjectArray_Set(iPatterns_, i, pattern);
    }
    OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixesSortedDescByLength_(self, [((IOSObjectArray *) nil_chk(iSuffixes_)) clone]);
    JavaUtilArrays_sortWithNSObjectArray_withJavaUtilComparator_(iSuffixesSortedDescByLength_, OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_LENGTH_DESC_COMPARATOR_);
  }
  return self;
}

- (jint)selectSuffixIndexWithInt:(jint)value {
  NSString *valueString = NSString_valueOfWithInt_(value);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(iPatterns_))->size_; i++) {
    if ([((JavaUtilRegexMatcher *) nil_chk([((JavaUtilRegexPattern *) nil_chk(IOSObjectArray_Get(iPatterns_, i))) matcherWithJavaLangCharSequence:valueString])) matches]) {
      return i;
    }
  }
  return iPatterns_->size_ - 1;
}

- (jint)calculatePrintedLengthWithInt:(jint)value {
  return ((jint) [((NSString *) nil_chk(IOSObjectArray_Get(nil_chk(iSuffixes_), [self selectSuffixIndexWithInt:value]))) length]);
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
                                withInt:(jint)value {
  [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:IOSObjectArray_Get(nil_chk(iSuffixes_), [self selectSuffixIndexWithInt:value])];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
                        withInt:(jint)value {
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:IOSObjectArray_Get(nil_chk(iSuffixes_), [self selectSuffixIndexWithInt:value])];
}

- (jint)parseWithNSString:(NSString *)periodStr
                  withInt:(jint)position {
  {
    IOSObjectArray *a__ = iSuffixesSortedDescByLength_;
    NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    NSString * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      NSString *text = *b__++;
      if ([((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:text otherOffset:0 count:((jint) [((NSString *) nil_chk(text)) length])]) {
        if (![self matchesOtherAffixWithInt:((jint) [text length]) withNSString:periodStr withInt:position]) {
          return position + ((jint) [text length]);
        }
      }
    }
  }
  return ~position;
}

- (jint)scanWithNSString:(NSString *)periodStr
                 withInt:(jint)position {
  jint sourceLength = ((jint) [((NSString *) nil_chk(periodStr)) length]);
  for (jint pos = position; pos < sourceLength; pos++) {
    {
      IOSObjectArray *a__ = iSuffixesSortedDescByLength_;
      NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      NSString * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        NSString *text = *b__++;
        if ([periodStr regionMatches:YES thisOffset:pos aString:text otherOffset:0 count:((jint) [((NSString *) nil_chk(text)) length])]) {
          if (![self matchesOtherAffixWithInt:((jint) [text length]) withNSString:periodStr withInt:pos]) {
            return pos;
          }
        }
      }
    }
  }
  return ~position;
}

- (IOSObjectArray *)getAffixes {
  return [((IOSObjectArray *) nil_chk(iSuffixes_)) clone];
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixes_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iPatterns_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixesSortedDescByLength_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixes_(other, iSuffixes_);
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iPatterns_(other, iPatterns_);
  OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_set_iSuffixesSortedDescByLength_(other, iSuffixesSortedDescByLength_);
}

+ (void)initialize {
  if (self == [OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix class]) {
    JreStrongAssignAndConsume(&OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_LENGTH_DESC_COMPARATOR_, nil, [[OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_$1 alloc] init]);
    J2OBJC_SET_INITIALIZED(OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSStringArray:withNSStringArray:", "RegExAffix", NULL, 0x0, NULL },
    { "selectSuffixIndexWithInt:", "selectSuffixIndex", "I", 0x2, NULL },
    { "calculatePrintedLengthWithInt:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withInt:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withInt:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseWithNSString:withInt:", "parse", "I", 0x1, NULL },
    { "scanWithNSString:withInt:", "scan", "I", 0x1, NULL },
    { "getAffixes", NULL, "[Ljava.lang.String;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "LENGTH_DESC_COMPARATOR_", NULL, 0x1a, "Ljava.util.Comparator;", &OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_LENGTH_DESC_COMPARATOR_,  },
    { "iSuffixes_", NULL, 0x12, "[Ljava.lang.String;", NULL,  },
    { "iPatterns_", NULL, 0x12, "[Ljava.util.regex.Pattern;", NULL,  },
    { "iSuffixesSortedDescByLength_", NULL, 0x12, "[Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix = { "RegExAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 8, methods, 4, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_$1

- (jint)compareWithId:(NSString *)o1
               withId:(NSString *)o2 {
  return ((jint) [((NSString *) nil_chk(o2)) length]) - ((jint) [((NSString *) nil_chk(o1)) length]);
}

- (instancetype)init {
  return [super init];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithNSString:withNSString:", "compare", "I", 0x1, NULL },
    { "init", NULL, NULL, 0x0, NULL },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_$1 = { "$1", "org.joda.time.format", "PeriodFormatterBuilder$RegExAffix", 0x8000, 2, methods, 0, NULL, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_RegExAffix_$1;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix

- (instancetype)initWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)left
                    withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)right {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeft_(self, left);
    OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iRight_(self, right);
    id<JavaUtilSet> result = [[[JavaUtilHashSet alloc] init] autorelease];
    {
      IOSObjectArray *a__ = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) getAffixes];
      NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      NSString * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        NSString *leftText = *b__++;
        {
          IOSObjectArray *a__ = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) getAffixes];
          NSString * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
          NSString * const *e__ = b__ + a__->size_;
          while (b__ < e__) {
            NSString *rightText = *b__++;
            [result addWithId:JreStrcat("$$", leftText, rightText)];
          }
        }
      }
    }
    OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeftRightCombinations_(self, [result toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[result size] type:[IOSClass classWithClass:[NSString class]]]]);
  }
  return self;
}

- (jint)calculatePrintedLengthWithInt:(jint)value {
  return [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) calculatePrintedLengthWithInt:value] + [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) calculatePrintedLengthWithInt:value];
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
                                withInt:(jint)value {
  [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) printToWithJavaLangStringBuffer:buf withInt:value];
  [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) printToWithJavaLangStringBuffer:buf withInt:value];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
                        withInt:(jint)value {
  [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) printToWithJavaIoWriter:outArg withInt:value];
  [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) printToWithJavaIoWriter:outArg withInt:value];
}

- (jint)parseWithNSString:(NSString *)periodStr
                  withInt:(jint)position {
  jint pos = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) parseWithNSString:periodStr withInt:position];
  if (pos >= 0) {
    pos = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) parseWithNSString:periodStr withInt:pos];
    if (pos >= 0 && [self matchesOtherAffixWithInt:[self parseWithNSString:periodStr withInt:pos] - pos withNSString:periodStr withInt:position]) {
      return ~position;
    }
  }
  return pos;
}

- (jint)scanWithNSString:(NSString *)periodStr
                 withInt:(jint)position {
  jint leftPosition = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iLeft_)) scanWithNSString:periodStr withInt:position];
  if (leftPosition >= 0) {
    jint rightPosition = [((id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>) nil_chk(iRight_)) scanWithNSString:periodStr withInt:[iLeft_ parseWithNSString:periodStr withInt:leftPosition]];
    if (!(rightPosition >= 0 && [self matchesOtherAffixWithInt:[iRight_ parseWithNSString:periodStr withInt:rightPosition] - leftPosition withNSString:periodStr withInt:position])) {
      if (leftPosition > 0) {
        return leftPosition;
      }
      else {
        return rightPosition;
      }
    }
  }
  return ~position;
}

- (IOSObjectArray *)getAffixes {
  return [((IOSObjectArray *) nil_chk(iLeftRightCombinations_)) clone];
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeft_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iRight_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeftRightCombinations_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeft_(other, iLeft_);
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iRight_(other, iRight_);
  OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix_set_iLeftRightCombinations_(other, iLeftRightCombinations_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:", "CompositeAffix", NULL, 0x0, NULL },
    { "calculatePrintedLengthWithInt:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withInt:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withInt:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseWithNSString:withInt:", "parse", "I", 0x1, NULL },
    { "scanWithNSString:withInt:", "scan", "I", 0x1, NULL },
    { "getAffixes", NULL, "[Ljava.lang.String;", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iLeft_", NULL, 0x12, "Lorg.joda.time.format.PeriodFormatterBuilder$PeriodFieldAffix;", NULL,  },
    { "iRight_", NULL, 0x12, "Lorg.joda.time.format.PeriodFormatterBuilder$PeriodFieldAffix;", NULL,  },
    { "iLeftRightCombinations_", NULL, 0x12, "[Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix = { "CompositeAffix", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 7, methods, 3, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter

- (instancetype)initWithInt:(jint)minPrintedDigits
                    withInt:(jint)printZeroSetting
                    withInt:(jint)maxParsedDigits
                withBoolean:(jboolean)rejectSignedValues
                    withInt:(jint)fieldType
withOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:(IOSObjectArray *)fieldFormatters
withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)prefix
withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)suffix {
  if (self = [super init]) {
    iMinPrintedDigits_ = minPrintedDigits;
    iPrintZeroSetting_ = printZeroSetting;
    iMaxParsedDigits_ = maxParsedDigits;
    iRejectSignedValues_ = rejectSignedValues;
    iFieldType_ = fieldType;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iFieldFormatters_(self, fieldFormatters);
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iPrefix_(self, prefix);
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iSuffix_(self, suffix);
  }
  return self;
}

- (instancetype)initWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter:(OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *)field
                  withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:(id<OrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix>)suffix {
  if (self = [super init]) {
    iMinPrintedDigits_ = ((OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *) nil_chk(field))->iMinPrintedDigits_;
    iPrintZeroSetting_ = field->iPrintZeroSetting_;
    iMaxParsedDigits_ = field->iMaxParsedDigits_;
    iRejectSignedValues_ = field->iRejectSignedValues_;
    iFieldType_ = field->iFieldType_;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iFieldFormatters_(self, field->iFieldFormatters_);
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iPrefix_(self, field->iPrefix_);
    if (field->iSuffix_ != nil) {
      suffix = [[[OrgJodaTimeFormatPeriodFormatterBuilder_CompositeAffix alloc] initWithOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:field->iSuffix_ withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:suffix] autorelease];
    }
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iSuffix_(self, suffix);
  }
  return self;
}

- (void)finishWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:(IOSObjectArray *)fieldFormatters {
  id<JavaUtilSet> prefixesToIgnore = [[[JavaUtilHashSet alloc] init] autorelease];
  id<JavaUtilSet> suffixesToIgnore = [[[JavaUtilHashSet alloc] init] autorelease];
  {
    IOSObjectArray *a__ = fieldFormatters;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *fieldFormatter = *b__++;
      if (fieldFormatter != nil && ![self isEqual:fieldFormatter]) {
        [prefixesToIgnore addWithId:fieldFormatter->iPrefix_];
        [suffixesToIgnore addWithId:fieldFormatter->iSuffix_];
      }
    }
  }
  if (iPrefix_ != nil) {
    [iPrefix_ finishWithJavaUtilSet:prefixesToIgnore];
  }
  if (iSuffix_ != nil) {
    [iSuffix_ finishWithJavaUtilSet:suffixesToIgnore];
  }
}

- (jint)countFieldsToPrintWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                                withInt:(jint)stopAt
                                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  if (stopAt <= 0) {
    return 0;
  }
  if (iPrintZeroSetting_ == OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_ALWAYS || [self getFieldValueWithOrgJodaTimeReadablePeriod:period] != JavaLangLong_MAX_VALUE) {
    return 1;
  }
  return 0;
}

- (jint)calculatePrintedLengthWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                         withJavaUtilLocale:(JavaUtilLocale *)locale {
  jlong valueLong = [self getFieldValueWithOrgJodaTimeReadablePeriod:period];
  if (valueLong == JavaLangLong_MAX_VALUE) {
    return 0;
  }
  jint sum = JavaLangMath_maxWithInt_withInt_(OrgJodaTimeFormatFormatUtils_calculateDigitCountWithLong_(valueLong), iMinPrintedDigits_);
  if (iFieldType_ >= OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS) {
    sum = (valueLong < 0 ? JavaLangMath_maxWithInt_withInt_(sum, 5) : JavaLangMath_maxWithInt_withInt_(sum, 4));
    sum++;
    if (iFieldType_ == OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS && (JavaLangMath_absWithLong_(valueLong) % OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND) == 0) {
      sum -= 4;
    }
    valueLong = valueLong / OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND;
  }
  jint value = (jint) valueLong;
  if (iPrefix_ != nil) {
    sum += [iPrefix_ calculatePrintedLengthWithInt:value];
  }
  if (iSuffix_ != nil) {
    sum += [iSuffix_ calculatePrintedLengthWithInt:value];
  }
  return sum;
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
          withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  jlong valueLong = [self getFieldValueWithOrgJodaTimeReadablePeriod:period];
  if (valueLong == JavaLangLong_MAX_VALUE) {
    return;
  }
  jint value = (jint) valueLong;
  if (iFieldType_ >= OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS) {
    value = (jint) (valueLong / OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND);
  }
  if (iPrefix_ != nil) {
    [iPrefix_ printToWithJavaLangStringBuffer:buf withInt:value];
  }
  jint bufLen = [((JavaLangStringBuffer *) nil_chk(buf)) sequenceLength];
  jint minDigits = iMinPrintedDigits_;
  if (minDigits <= 1) {
    OrgJodaTimeFormatFormatUtils_appendUnpaddedIntegerWithJavaLangStringBuffer_withInt_(buf, value);
  }
  else {
    OrgJodaTimeFormatFormatUtils_appendPaddedIntegerWithJavaLangStringBuffer_withInt_withInt_(buf, value, minDigits);
  }
  if (iFieldType_ >= OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS) {
    jint dp = (jint) (JavaLangMath_absWithLong_(valueLong) % OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND);
    if (iFieldType_ == OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS || dp > 0) {
      if (valueLong < 0 && valueLong > -OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND) {
        [buf insertWithInt:bufLen withChar:'-'];
      }
      [buf appendWithChar:'.'];
      OrgJodaTimeFormatFormatUtils_appendPaddedIntegerWithJavaLangStringBuffer_withInt_withInt_(buf, dp, 3);
    }
  }
  if (iSuffix_ != nil) {
    [iSuffix_ printToWithJavaLangStringBuffer:buf withInt:value];
  }
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
  withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
             withJavaUtilLocale:(JavaUtilLocale *)locale {
  jlong valueLong = [self getFieldValueWithOrgJodaTimeReadablePeriod:period];
  if (valueLong == JavaLangLong_MAX_VALUE) {
    return;
  }
  jint value = (jint) valueLong;
  if (iFieldType_ >= OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS) {
    value = (jint) (valueLong / OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND);
  }
  if (iPrefix_ != nil) {
    [iPrefix_ printToWithJavaIoWriter:outArg withInt:value];
  }
  jint minDigits = iMinPrintedDigits_;
  if (minDigits <= 1) {
    OrgJodaTimeFormatFormatUtils_writeUnpaddedIntegerWithJavaIoWriter_withInt_(outArg, value);
  }
  else {
    OrgJodaTimeFormatFormatUtils_writePaddedIntegerWithJavaIoWriter_withInt_withInt_(outArg, value, minDigits);
  }
  if (iFieldType_ >= OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS) {
    jint dp = (jint) (JavaLangMath_absWithLong_(valueLong) % OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND);
    if (iFieldType_ == OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS || dp > 0) {
      [((JavaIoWriter *) nil_chk(outArg)) writeWithInt:'.'];
      OrgJodaTimeFormatFormatUtils_writePaddedIntegerWithJavaIoWriter_withInt_withInt_(outArg, dp, 3);
    }
  }
  if (iSuffix_ != nil) {
    [iSuffix_ printToWithJavaIoWriter:outArg withInt:value];
  }
}

- (jint)parseIntoWithOrgJodaTimeReadWritablePeriod:(id<OrgJodaTimeReadWritablePeriod>)period
                                      withNSString:(NSString *)text
                                           withInt:(jint)position
                                withJavaUtilLocale:(JavaUtilLocale *)locale {
  jboolean mustParse = iPrintZeroSetting_ == OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_ALWAYS;
  if (position >= ((jint) [((NSString *) nil_chk(text)) length])) {
    return mustParse ? ~position : position;
  }
  if (iPrefix_ != nil) {
    position = [iPrefix_ parseWithNSString:text withInt:position];
    if (position >= 0) {
      mustParse = YES;
    }
    else {
      if (!mustParse) {
        return ~position;
      }
      return position;
    }
  }
  jint suffixPos = -1;
  if (iSuffix_ != nil && !mustParse) {
    suffixPos = [iSuffix_ scanWithNSString:text withInt:position];
    if (suffixPos >= 0) {
      mustParse = YES;
    }
    else {
      if (!mustParse) {
        return ~suffixPos;
      }
      return suffixPos;
    }
  }
  if (!mustParse && ![self isSupportedWithOrgJodaTimePeriodType:[((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) getPeriodType] withInt:iFieldType_]) {
    return position;
  }
  jint limit;
  if (suffixPos > 0) {
    limit = JavaLangMath_minWithInt_withInt_(iMaxParsedDigits_, suffixPos - position);
  }
  else {
    limit = JavaLangMath_minWithInt_withInt_(iMaxParsedDigits_, ((jint) [text length]) - position);
  }
  jint length = 0;
  jint fractPos = -1;
  jboolean hasDigits = NO;
  while (length < limit) {
    jchar c = [text charAtWithInt:position + length];
    if (length == 0 && (c == '-' || c == '+') && !iRejectSignedValues_) {
      jboolean negative = c == '-';
      if (length + 1 >= limit || (c = [text charAtWithInt:position + length + 1]) < '0' || c > '9') {
        break;
      }
      if (negative) {
        length++;
      }
      else {
        position++;
      }
      limit = JavaLangMath_minWithInt_withInt_(limit + 1, ((jint) [text length]) - position);
      continue;
    }
    if (c >= '0' && c <= '9') {
      hasDigits = YES;
    }
    else {
      if ((c == '.' || c == ',') && (iFieldType_ == OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS || iFieldType_ == OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS)) {
        if (fractPos >= 0) {
          break;
        }
        fractPos = position + length + 1;
        limit = JavaLangMath_minWithInt_withInt_(limit + 1, ((jint) [text length]) - position);
      }
      else {
        break;
      }
    }
    length++;
  }
  if (!hasDigits) {
    return ~position;
  }
  if (suffixPos >= 0 && position + length != suffixPos) {
    return position;
  }
  if (iFieldType_ != OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS && iFieldType_ != OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS) {
    [self setFieldValueWithOrgJodaTimeReadWritablePeriod:period withInt:iFieldType_ withInt:[self parseIntWithNSString:text withInt:position withInt:length]];
  }
  else if (fractPos < 0) {
    [self setFieldValueWithOrgJodaTimeReadWritablePeriod:period withInt:OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS withInt:[self parseIntWithNSString:text withInt:position withInt:length]];
    [self setFieldValueWithOrgJodaTimeReadWritablePeriod:period withInt:OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS withInt:0];
  }
  else {
    jint wholeValue = [self parseIntWithNSString:text withInt:position withInt:fractPos - position - 1];
    [self setFieldValueWithOrgJodaTimeReadWritablePeriod:period withInt:OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS withInt:wholeValue];
    jint fractLen = position + length - fractPos;
    jint fractValue;
    if (fractLen <= 0) {
      fractValue = 0;
    }
    else {
      if (fractLen >= 3) {
        fractValue = [self parseIntWithNSString:text withInt:fractPos withInt:3];
      }
      else {
        fractValue = [self parseIntWithNSString:text withInt:fractPos withInt:fractLen];
        if (fractLen == 1) {
          fractValue *= 100;
        }
        else {
          fractValue *= 10;
        }
      }
      if (wholeValue < 0) {
        fractValue = -fractValue;
      }
    }
    [self setFieldValueWithOrgJodaTimeReadWritablePeriod:period withInt:OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS withInt:fractValue];
  }
  position += length;
  if (position >= 0 && iSuffix_ != nil) {
    position = [iSuffix_ parseWithNSString:text withInt:position];
  }
  return position;
}

- (jint)parseIntWithNSString:(NSString *)text
                     withInt:(jint)position
                     withInt:(jint)length {
  if (length >= 10) {
    return JavaLangInteger_parseIntWithNSString_([((NSString *) nil_chk(text)) substring:position endIndex:position + length]);
  }
  if (length <= 0) {
    return 0;
  }
  jint value = [((NSString *) nil_chk(text)) charAtWithInt:position++];
  length--;
  jboolean negative;
  if (value == '-') {
    if (--length < 0) {
      return 0;
    }
    negative = YES;
    value = [text charAtWithInt:position++];
  }
  else {
    negative = NO;
  }
  value -= '0';
  while (length-- > 0) {
    value = ((LShift32(value, 3)) + (LShift32(value, 1))) + [text charAtWithInt:position++] - '0';
  }
  return negative ? -value : value;
}

- (jlong)getFieldValueWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period {
  OrgJodaTimePeriodType *type;
  if (iPrintZeroSetting_ == OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_ALWAYS) {
    type = nil;
  }
  else {
    type = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getPeriodType];
  }
  if (type != nil && [self isSupportedWithOrgJodaTimePeriodType:type withInt:iFieldType_] == NO) {
    return JavaLangLong_MAX_VALUE;
  }
  jlong value;
  {
    jint seconds;
    jint millis;
    switch (iFieldType_) {
      default:
      return JavaLangLong_MAX_VALUE;
      case OrgJodaTimeFormatPeriodFormatterBuilder_YEARS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_years()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_MONTHS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_months()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_WEEKS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_weeks()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_DAYS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_days()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_HOURS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_hours()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_MINUTES:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_minutes()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_seconds()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS:
      value = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_millis()];
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS:
      case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS:
      seconds = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_seconds()];
      millis = [period getWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_millis()];
      value = (seconds * (jlong) OrgJodaTimeDateTimeConstants_MILLIS_PER_SECOND) + millis;
      break;
    }
  }
  if (value == 0) {
    switch (iPrintZeroSetting_) {
      case OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_NEVER:
      return JavaLangLong_MAX_VALUE;
      case OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_LAST:
      if ([self isZeroWithOrgJodaTimeReadablePeriod:period] && IOSObjectArray_Get(nil_chk(iFieldFormatters_), iFieldType_) == self) {
        for (jint i = iFieldType_ + 1; i <= OrgJodaTimeFormatPeriodFormatterBuilder_MAX_FIELD; i++) {
          if ([self isSupportedWithOrgJodaTimePeriodType:type withInt:i] && IOSObjectArray_Get(iFieldFormatters_, i) != nil) {
            return JavaLangLong_MAX_VALUE;
          }
        }
      }
      else {
        return JavaLangLong_MAX_VALUE;
      }
      break;
      case OrgJodaTimeFormatPeriodFormatterBuilder_PRINT_ZERO_RARELY_FIRST:
      if ([self isZeroWithOrgJodaTimeReadablePeriod:period] && IOSObjectArray_Get(nil_chk(iFieldFormatters_), iFieldType_) == self) {
        jint i = JavaLangMath_minWithInt_withInt_(iFieldType_, 8);
        i--;
        for (; i >= 0 && i <= OrgJodaTimeFormatPeriodFormatterBuilder_MAX_FIELD; i--) {
          if ([self isSupportedWithOrgJodaTimePeriodType:type withInt:i] && IOSObjectArray_Get(iFieldFormatters_, i) != nil) {
            return JavaLangLong_MAX_VALUE;
          }
        }
      }
      else {
        return JavaLangLong_MAX_VALUE;
      }
      break;
    }
  }
  return value;
}

- (jboolean)isZeroWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period {
  for (jint i = 0, isize = [((id<OrgJodaTimeReadablePeriod>) nil_chk(period)) size]; i < isize; i++) {
    if ([period getValueWithInt:i] != 0) {
      return NO;
    }
  }
  return YES;
}

- (jboolean)isSupportedWithOrgJodaTimePeriodType:(OrgJodaTimePeriodType *)type
                                         withInt:(jint)field {
  switch (field) {
    default:
    return NO;
    case OrgJodaTimeFormatPeriodFormatterBuilder_YEARS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_years()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_MONTHS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_months()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_WEEKS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_weeks()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_DAYS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_days()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_HOURS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_hours()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_MINUTES:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_minutes()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_seconds()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_millis()];
    case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_MILLIS:
    case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS_OPTIONAL_MILLIS:
    return [((OrgJodaTimePeriodType *) nil_chk(type)) isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_seconds()] || [type isSupportedWithOrgJodaTimeDurationFieldType:OrgJodaTimeDurationFieldType_millis()];
  }
}

- (void)setFieldValueWithOrgJodaTimeReadWritablePeriod:(id<OrgJodaTimeReadWritablePeriod>)period
                                               withInt:(jint)field
                                               withInt:(jint)value {
  switch (field) {
    default:
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_YEARS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setYearsWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_MONTHS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setMonthsWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_WEEKS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setWeeksWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_DAYS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setDaysWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_HOURS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setHoursWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_MINUTES:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setMinutesWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_SECONDS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setSecondsWithInt:value];
    break;
    case OrgJodaTimeFormatPeriodFormatterBuilder_MILLIS:
    [((id<OrgJodaTimeReadWritablePeriod>) nil_chk(period)) setMillisWithInt:value];
    break;
  }
}

- (jint)getFieldType {
  return iFieldType_;
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iFieldFormatters_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iPrefix_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iSuffix_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter *)other {
  [super copyAllFieldsTo:other];
  other->iMinPrintedDigits_ = iMinPrintedDigits_;
  other->iPrintZeroSetting_ = iPrintZeroSetting_;
  other->iMaxParsedDigits_ = iMaxParsedDigits_;
  other->iRejectSignedValues_ = iRejectSignedValues_;
  other->iFieldType_ = iFieldType_;
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iFieldFormatters_(other, iFieldFormatters_);
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iPrefix_(other, iPrefix_);
  OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter_set_iSuffix_(other, iSuffix_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withInt:withBoolean:withInt:withOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:", "FieldFormatter", NULL, 0x0, NULL },
    { "initWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter:withOrgJodaTimeFormatPeriodFormatterBuilder_PeriodFieldAffix:", "FieldFormatter", NULL, 0x0, NULL },
    { "finishWithOrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatterArray:", "finish", "V", 0x1, NULL },
    { "countFieldsToPrintWithOrgJodaTimeReadablePeriod:withInt:withJavaUtilLocale:", "countFieldsToPrint", "I", 0x1, NULL },
    { "calculatePrintedLengthWithOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseIntoWithOrgJodaTimeReadWritablePeriod:withNSString:withInt:withJavaUtilLocale:", "parseInto", "I", 0x1, NULL },
    { "parseIntWithNSString:withInt:withInt:", "parseInt", "I", 0x2, NULL },
    { "getFieldValueWithOrgJodaTimeReadablePeriod:", "getFieldValue", "J", 0x0, NULL },
    { "isZeroWithOrgJodaTimeReadablePeriod:", "isZero", "Z", 0x0, NULL },
    { "isSupportedWithOrgJodaTimePeriodType:withInt:", "isSupported", "Z", 0x0, NULL },
    { "setFieldValueWithOrgJodaTimeReadWritablePeriod:withInt:withInt:", "setFieldValue", "V", 0x0, NULL },
    { "getFieldType", NULL, "I", 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iMinPrintedDigits_", NULL, 0x12, "I", NULL,  },
    { "iPrintZeroSetting_", NULL, 0x12, "I", NULL,  },
    { "iMaxParsedDigits_", NULL, 0x12, "I", NULL,  },
    { "iRejectSignedValues_", NULL, 0x12, "Z", NULL,  },
    { "iFieldType_", NULL, 0x12, "I", NULL,  },
    { "iFieldFormatters_", NULL, 0x12, "[Lorg.joda.time.format.PeriodFormatterBuilder$FieldFormatter;", NULL,  },
    { "iPrefix_", NULL, 0x12, "Lorg.joda.time.format.PeriodFormatterBuilder$PeriodFieldAffix;", NULL,  },
    { "iSuffix_", NULL, 0x12, "Lorg.joda.time.format.PeriodFormatterBuilder$PeriodFieldAffix;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter = { "FieldFormatter", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 14, methods, 8, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_FieldFormatter;
}

@end

BOOL OrgJodaTimeFormatPeriodFormatterBuilder_Literal_initialized = NO;

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_Literal

OrgJodaTimeFormatPeriodFormatterBuilder_Literal * OrgJodaTimeFormatPeriodFormatterBuilder_Literal_EMPTY_;

- (instancetype)initWithNSString:(NSString *)text {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_Literal_set_iText_(self, text);
  }
  return self;
}

- (jint)countFieldsToPrintWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                                withInt:(jint)stopAt
                                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  return 0;
}

- (jint)calculatePrintedLengthWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                         withJavaUtilLocale:(JavaUtilLocale *)locale {
  return ((jint) [((NSString *) nil_chk(iText_)) length]);
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
          withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:iText_];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
  withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
             withJavaUtilLocale:(JavaUtilLocale *)locale {
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:iText_];
}

- (jint)parseIntoWithOrgJodaTimeReadWritablePeriod:(id<OrgJodaTimeReadWritablePeriod>)period
                                      withNSString:(NSString *)periodStr
                                           withInt:(jint)position
                                withJavaUtilLocale:(JavaUtilLocale *)locale {
  if ([((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:iText_ otherOffset:0 count:((jint) [((NSString *) nil_chk(iText_)) length])]) {
    return position + ((jint) [iText_ length]);
  }
  return ~position;
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_Literal_set_iText_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_Literal *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_Literal_set_iText_(other, iText_);
}

+ (void)initialize {
  if (self == [OrgJodaTimeFormatPeriodFormatterBuilder_Literal class]) {
    JreStrongAssignAndConsume(&OrgJodaTimeFormatPeriodFormatterBuilder_Literal_EMPTY_, nil, [[OrgJodaTimeFormatPeriodFormatterBuilder_Literal alloc] initWithNSString:@""]);
    J2OBJC_SET_INITIALIZED(OrgJodaTimeFormatPeriodFormatterBuilder_Literal)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:", "Literal", NULL, 0x0, NULL },
    { "countFieldsToPrintWithOrgJodaTimeReadablePeriod:withInt:withJavaUtilLocale:", "countFieldsToPrint", "I", 0x1, NULL },
    { "calculatePrintedLengthWithOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseIntoWithOrgJodaTimeReadWritablePeriod:withNSString:withInt:withJavaUtilLocale:", "parseInto", "I", 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "EMPTY_", NULL, 0x18, "Lorg.joda.time.format.PeriodFormatterBuilder$Literal;", &OrgJodaTimeFormatPeriodFormatterBuilder_Literal_EMPTY_,  },
    { "iText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_Literal = { "Literal", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 6, methods, 2, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_Literal;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_Separator

- (instancetype)initWithNSString:(NSString *)text
                    withNSString:(NSString *)finalText
               withNSStringArray:(IOSObjectArray *)variants
withOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>)beforePrinter
withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>)beforeParser
                     withBoolean:(jboolean)useBefore
                     withBoolean:(jboolean)useAfter {
  if (self = [super init]) {
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iText_(self, text);
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iFinalText_(self, finalText);
    if ((finalText == nil || [((NSString *) nil_chk(text)) isEqual:finalText]) && (variants == nil || variants->size_ == 0)) {
      OrgJodaTimeFormatPeriodFormatterBuilder_Separator_setAndConsume_iParsedForms_(self, [IOSObjectArray newArrayWithObjects:(id[]){ text } count:1 type:[IOSClass classWithClass:[NSString class]]]);
    }
    else {
      JavaUtilTreeSet *parsedSet = [[[JavaUtilTreeSet alloc] initWithJavaUtilComparator:NSString_get_CASE_INSENSITIVE_ORDER_()] autorelease];
      [parsedSet addWithId:text];
      [parsedSet addWithId:finalText];
      if (variants != nil) {
        for (jint i = variants->size_; --i >= 0; ) {
          [parsedSet addWithId:IOSObjectArray_Get(variants, i)];
        }
      }
      JavaUtilArrayList *parsedList = [[[JavaUtilArrayList alloc] initWithJavaUtilCollection:parsedSet] autorelease];
      JavaUtilCollections_reverseWithJavaUtilList_(parsedList);
      OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iParsedForms_(self, [parsedList toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[parsedList size] type:[IOSClass classWithClass:[NSString class]]]]);
    }
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforePrinter_(self, beforePrinter);
    OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforeParser_(self, beforeParser);
    iUseBefore_ = useBefore;
    iUseAfter_ = useAfter;
  }
  return self;
}

- (jint)countFieldsToPrintWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                                withInt:(jint)stopAt
                                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  jint sum = [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(iBeforePrinter_)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:stopAt withJavaUtilLocale:locale];
  if (sum < stopAt) {
    sum += [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(iAfterPrinter_)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:stopAt withJavaUtilLocale:locale];
  }
  return sum;
}

- (jint)calculatePrintedLengthWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                         withJavaUtilLocale:(JavaUtilLocale *)locale {
  id<OrgJodaTimeFormatPeriodPrinter> before = iBeforePrinter_;
  id<OrgJodaTimeFormatPeriodPrinter> after = iAfterPrinter_;
  jint sum = [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(before)) calculatePrintedLengthWithOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale] + [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) calculatePrintedLengthWithOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  if (iUseBefore_) {
    if ([before countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
      if (iUseAfter_) {
        jint afterCount = [after countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:2 withJavaUtilLocale:locale];
        if (afterCount > 0) {
          sum += ((jint) [(afterCount > 1 ? iText_ : iFinalText_) length]);
        }
      }
      else {
        sum += ((jint) [((NSString *) nil_chk(iText_)) length]);
      }
    }
  }
  else if (iUseAfter_ && [after countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
    sum += ((jint) [((NSString *) nil_chk(iText_)) length]);
  }
  return sum;
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
          withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  id<OrgJodaTimeFormatPeriodPrinter> before = iBeforePrinter_;
  id<OrgJodaTimeFormatPeriodPrinter> after = iAfterPrinter_;
  [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(before)) printToWithJavaLangStringBuffer:buf withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  if (iUseBefore_) {
    if ([before countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
      if (iUseAfter_) {
        jint afterCount = [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:2 withJavaUtilLocale:locale];
        if (afterCount > 0) {
          [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:afterCount > 1 ? iText_ : iFinalText_];
        }
      }
      else {
        [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:iText_];
      }
    }
  }
  else if (iUseAfter_ && [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
    [((JavaLangStringBuffer *) nil_chk(buf)) appendWithNSString:iText_];
  }
  [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) printToWithJavaLangStringBuffer:buf withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
  withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
             withJavaUtilLocale:(JavaUtilLocale *)locale {
  id<OrgJodaTimeFormatPeriodPrinter> before = iBeforePrinter_;
  id<OrgJodaTimeFormatPeriodPrinter> after = iAfterPrinter_;
  [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(before)) printToWithJavaIoWriter:outArg withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  if (iUseBefore_) {
    if ([before countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
      if (iUseAfter_) {
        jint afterCount = [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:2 withJavaUtilLocale:locale];
        if (afterCount > 0) {
          [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:afterCount > 1 ? iText_ : iFinalText_];
        }
      }
      else {
        [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:iText_];
      }
    }
  }
  else if (iUseAfter_ && [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:1 withJavaUtilLocale:locale] > 0) {
    [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:iText_];
  }
  [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(after)) printToWithJavaIoWriter:outArg withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
}

- (jint)parseIntoWithOrgJodaTimeReadWritablePeriod:(id<OrgJodaTimeReadWritablePeriod>)period
                                      withNSString:(NSString *)periodStr
                                           withInt:(jint)position
                                withJavaUtilLocale:(JavaUtilLocale *)locale {
  jint oldPos = position;
  position = [((id<OrgJodaTimeFormatPeriodParser>) nil_chk(iBeforeParser_)) parseIntoWithOrgJodaTimeReadWritablePeriod:period withNSString:periodStr withInt:position withJavaUtilLocale:locale];
  if (position < 0) {
    return position;
  }
  jboolean found = NO;
  jint parsedFormLength = -1;
  if (position > oldPos) {
    IOSObjectArray *parsedForms = iParsedForms_;
    jint length = ((IOSObjectArray *) nil_chk(parsedForms))->size_;
    for (jint i = 0; i < length; i++) {
      NSString *parsedForm = IOSObjectArray_Get(parsedForms, i);
      if ((parsedForm == nil || ((jint) [parsedForm length]) == 0) || [((NSString *) nil_chk(periodStr)) regionMatches:YES thisOffset:position aString:parsedForm otherOffset:0 count:((jint) [parsedForm length])]) {
        parsedFormLength = (parsedForm == nil ? 0 : ((jint) [parsedForm length]));
        position += parsedFormLength;
        found = YES;
        break;
      }
    }
  }
  oldPos = position;
  position = [((id<OrgJodaTimeFormatPeriodParser>) nil_chk(iAfterParser_)) parseIntoWithOrgJodaTimeReadWritablePeriod:period withNSString:periodStr withInt:position withJavaUtilLocale:locale];
  if (position < 0) {
    return position;
  }
  if (found && position == oldPos && parsedFormLength > 0) {
    return ~oldPos;
  }
  if (position > oldPos && !found && !iUseBefore_) {
    return ~oldPos;
  }
  return position;
}

- (OrgJodaTimeFormatPeriodFormatterBuilder_Separator *)finishWithOrgJodaTimeFormatPeriodPrinter:(id<OrgJodaTimeFormatPeriodPrinter>)afterPrinter
                                                              withOrgJodaTimeFormatPeriodParser:(id<OrgJodaTimeFormatPeriodParser>)afterParser {
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterPrinter_(self, afterPrinter);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterParser_(self, afterParser);
  return self;
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iText_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iFinalText_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iParsedForms_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforePrinter_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterPrinter_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforeParser_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterParser_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_Separator *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iText_(other, iText_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iFinalText_(other, iFinalText_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iParsedForms_(other, iParsedForms_);
  other->iUseBefore_ = iUseBefore_;
  other->iUseAfter_ = iUseAfter_;
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforePrinter_(other, iBeforePrinter_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterPrinter_(other, iAfterPrinter_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iBeforeParser_(other, iBeforeParser_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Separator_set_iAfterParser_(other, iAfterParser_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withNSString:withNSStringArray:withOrgJodaTimeFormatPeriodPrinter:withOrgJodaTimeFormatPeriodParser:withBoolean:withBoolean:", "Separator", NULL, 0x0, NULL },
    { "countFieldsToPrintWithOrgJodaTimeReadablePeriod:withInt:withJavaUtilLocale:", "countFieldsToPrint", "I", 0x1, NULL },
    { "calculatePrintedLengthWithOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseIntoWithOrgJodaTimeReadWritablePeriod:withNSString:withInt:withJavaUtilLocale:", "parseInto", "I", 0x1, NULL },
    { "finishWithOrgJodaTimeFormatPeriodPrinter:withOrgJodaTimeFormatPeriodParser:", "finish", "Lorg.joda.time.format.PeriodFormatterBuilder$Separator;", 0x0, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
    { "iFinalText_", NULL, 0x12, "Ljava.lang.String;", NULL,  },
    { "iParsedForms_", NULL, 0x12, "[Ljava.lang.String;", NULL,  },
    { "iUseBefore_", NULL, 0x12, "Z", NULL,  },
    { "iUseAfter_", NULL, 0x12, "Z", NULL,  },
    { "iBeforePrinter_", NULL, 0x12, "Lorg.joda.time.format.PeriodPrinter;", NULL,  },
    { "iAfterPrinter_", NULL, 0x42, "Lorg.joda.time.format.PeriodPrinter;", NULL,  },
    { "iBeforeParser_", NULL, 0x12, "Lorg.joda.time.format.PeriodParser;", NULL,  },
    { "iAfterParser_", NULL, 0x42, "Lorg.joda.time.format.PeriodParser;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_Separator = { "Separator", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 7, methods, 9, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_Separator;
}

@end

@implementation OrgJodaTimeFormatPeriodFormatterBuilder_Composite

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)elementPairs {
  if (self = [super init]) {
    id<JavaUtilList> printerList = [[[JavaUtilArrayList alloc] init] autorelease];
    id<JavaUtilList> parserList = [[[JavaUtilArrayList alloc] init] autorelease];
    [self decomposeWithJavaUtilList:elementPairs withJavaUtilList:printerList withJavaUtilList:parserList];
    if ([printerList size] <= 0) {
      OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iPrinters_(self, nil);
    }
    else {
      OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iPrinters_(self, [printerList toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[printerList size] type:[IOSClass classWithProtocol:@protocol(OrgJodaTimeFormatPeriodPrinter)]]]);
    }
    if ([parserList size] <= 0) {
      OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iParsers_(self, nil);
    }
    else {
      OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iParsers_(self, [parserList toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:[parserList size] type:[IOSClass classWithProtocol:@protocol(OrgJodaTimeFormatPeriodParser)]]]);
    }
  }
  return self;
}

- (jint)countFieldsToPrintWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                                withInt:(jint)stopAt
                                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  jint sum = 0;
  IOSObjectArray *printers = iPrinters_;
  for (jint i = ((IOSObjectArray *) nil_chk(printers))->size_; sum < stopAt && --i >= 0; ) {
    sum += [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(IOSObjectArray_Get(printers, i))) countFieldsToPrintWithOrgJodaTimeReadablePeriod:period withInt:JavaLangInteger_MAX_VALUE withJavaUtilLocale:locale];
  }
  return sum;
}

- (jint)calculatePrintedLengthWithOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                                         withJavaUtilLocale:(JavaUtilLocale *)locale {
  jint sum = 0;
  IOSObjectArray *printers = iPrinters_;
  for (jint i = ((IOSObjectArray *) nil_chk(printers))->size_; --i >= 0; ) {
    sum += [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(IOSObjectArray_Get(printers, i))) calculatePrintedLengthWithOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  }
  return sum;
}

- (void)printToWithJavaLangStringBuffer:(JavaLangStringBuffer *)buf
          withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
                     withJavaUtilLocale:(JavaUtilLocale *)locale {
  IOSObjectArray *printers = iPrinters_;
  jint len = ((IOSObjectArray *) nil_chk(printers))->size_;
  for (jint i = 0; i < len; i++) {
    [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(IOSObjectArray_Get(printers, i))) printToWithJavaLangStringBuffer:buf withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  }
}

- (void)printToWithJavaIoWriter:(JavaIoWriter *)outArg
  withOrgJodaTimeReadablePeriod:(id<OrgJodaTimeReadablePeriod>)period
             withJavaUtilLocale:(JavaUtilLocale *)locale {
  IOSObjectArray *printers = iPrinters_;
  jint len = ((IOSObjectArray *) nil_chk(printers))->size_;
  for (jint i = 0; i < len; i++) {
    [((id<OrgJodaTimeFormatPeriodPrinter>) nil_chk(IOSObjectArray_Get(printers, i))) printToWithJavaIoWriter:outArg withOrgJodaTimeReadablePeriod:period withJavaUtilLocale:locale];
  }
}

- (jint)parseIntoWithOrgJodaTimeReadWritablePeriod:(id<OrgJodaTimeReadWritablePeriod>)period
                                      withNSString:(NSString *)periodStr
                                           withInt:(jint)position
                                withJavaUtilLocale:(JavaUtilLocale *)locale {
  IOSObjectArray *parsers = iParsers_;
  if (parsers == nil) {
    @throw [[[JavaLangUnsupportedOperationException alloc] init] autorelease];
  }
  jint len = ((IOSObjectArray *) nil_chk(parsers))->size_;
  for (jint i = 0; i < len && position >= 0; i++) {
    position = [((id<OrgJodaTimeFormatPeriodParser>) nil_chk(IOSObjectArray_Get(parsers, i))) parseIntoWithOrgJodaTimeReadWritablePeriod:period withNSString:periodStr withInt:position withJavaUtilLocale:locale];
  }
  return position;
}

- (void)decomposeWithJavaUtilList:(id<JavaUtilList>)elementPairs
                 withJavaUtilList:(id<JavaUtilList>)printerList
                 withJavaUtilList:(id<JavaUtilList>)parserList {
  jint size = [((id<JavaUtilList>) nil_chk(elementPairs)) size];
  for (jint i = 0; i < size; i += 2) {
    id element = [elementPairs getWithInt:i];
    if ([element conformsToProtocol: @protocol(OrgJodaTimeFormatPeriodPrinter)]) {
      if ([element isKindOfClass:[OrgJodaTimeFormatPeriodFormatterBuilder_Composite class]]) {
        [self addArrayToListWithJavaUtilList:printerList withNSObjectArray:((OrgJodaTimeFormatPeriodFormatterBuilder_Composite *) nil_chk(((OrgJodaTimeFormatPeriodFormatterBuilder_Composite *) check_class_cast(element, [OrgJodaTimeFormatPeriodFormatterBuilder_Composite class]))))->iPrinters_];
      }
      else {
        [((id<JavaUtilList>) nil_chk(printerList)) addWithId:element];
      }
    }
    element = [elementPairs getWithInt:i + 1];
    if ([element conformsToProtocol: @protocol(OrgJodaTimeFormatPeriodParser)]) {
      if ([element isKindOfClass:[OrgJodaTimeFormatPeriodFormatterBuilder_Composite class]]) {
        [self addArrayToListWithJavaUtilList:parserList withNSObjectArray:((OrgJodaTimeFormatPeriodFormatterBuilder_Composite *) nil_chk(((OrgJodaTimeFormatPeriodFormatterBuilder_Composite *) check_class_cast(element, [OrgJodaTimeFormatPeriodFormatterBuilder_Composite class]))))->iParsers_];
      }
      else {
        [((id<JavaUtilList>) nil_chk(parserList)) addWithId:element];
      }
    }
  }
}

- (void)addArrayToListWithJavaUtilList:(id<JavaUtilList>)list
                     withNSObjectArray:(IOSObjectArray *)array {
  if (array != nil) {
    for (jint i = 0; i < array->size_; i++) {
      [((id<JavaUtilList>) nil_chk(list)) addWithId:IOSObjectArray_Get(array, i)];
    }
  }
}

- (void)dealloc {
  OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iPrinters_(self, nil);
  OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iParsers_(self, nil);
  [super dealloc];
}

- (void)copyAllFieldsTo:(OrgJodaTimeFormatPeriodFormatterBuilder_Composite *)other {
  [super copyAllFieldsTo:other];
  OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iPrinters_(other, iPrinters_);
  OrgJodaTimeFormatPeriodFormatterBuilder_Composite_set_iParsers_(other, iParsers_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilList:", "Composite", NULL, 0x0, NULL },
    { "countFieldsToPrintWithOrgJodaTimeReadablePeriod:withInt:withJavaUtilLocale:", "countFieldsToPrint", "I", 0x1, NULL },
    { "calculatePrintedLengthWithOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "calculatePrintedLength", "I", 0x1, NULL },
    { "printToWithJavaLangStringBuffer:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, NULL },
    { "printToWithJavaIoWriter:withOrgJodaTimeReadablePeriod:withJavaUtilLocale:", "printTo", "V", 0x1, "Ljava.io.IOException;" },
    { "parseIntoWithOrgJodaTimeReadWritablePeriod:withNSString:withInt:withJavaUtilLocale:", "parseInto", "I", 0x1, NULL },
    { "decomposeWithJavaUtilList:withJavaUtilList:withJavaUtilList:", "decompose", "V", 0x2, NULL },
    { "addArrayToListWithJavaUtilList:withNSObjectArray:", "addArrayToList", "V", 0x2, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iPrinters_", NULL, 0x12, "[Lorg.joda.time.format.PeriodPrinter;", NULL,  },
    { "iParsers_", NULL, 0x12, "[Lorg.joda.time.format.PeriodParser;", NULL,  },
  };
  static const J2ObjcClassInfo _OrgJodaTimeFormatPeriodFormatterBuilder_Composite = { "Composite", "org.joda.time.format", "PeriodFormatterBuilder", 0x8, 8, methods, 2, fields, 0, NULL};
  return &_OrgJodaTimeFormatPeriodFormatterBuilder_Composite;
}

@end
